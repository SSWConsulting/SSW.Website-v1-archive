<html xmlns="http://www.w3.org/1999/xhtml"><head id="ctl00_Head1"><title>
	SSW Rules to Better ISA Server
</title><meta content="en-au" http-equiv="Content-Language"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta content="SSW, Consultants for software, database and website development, Software development, website development, web development, development, Access, SQL Server, ASP, .net, DotNet, Dot net, ASP.NET, VB.NET, C#, visual basic, database, website, web site, consultants, application, shopping cart, Internet, web, exchange server, sharepoint portal server, sharepoint team services,Database Design Australia, .Net development, sydney Australia, Web Design Australia, website design, web design, IT Services Australia, developers, Database Architect, Software architect, Software solution, Custom database solutions,Custom software solutions, downloads, Website design Australia, Online Database Australia, e-business, web development sydney, website development sydney, CRM, CRM Solution, SharePoint solution, MOSS solution, ebusiness, Sydney, Australia, Sydney Australia, Beijing China, Penang Malaysia, Sao Paulo Brazil" id="ctl00_keywords" name="keywords"/><meta content="Angular, React, Vue, Azure, Azure DevOps (was TFS), SharePoint, Office 365, Blazor, .NET, WebAPI, Dynamics 365, and SQL Server. We have software consultants located in Sydney, Brisbane, Melbourne, Newcastle, and China." name="description"/><meta content="SSW" name="author"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="/history/css/Content.css" id="ctl00_Link1" media="screen" rel="stylesheet" type="text/css"/><link href="../../include/Adapters/CSS/Import.css" id="ctl00_AdaptersInvariantImportCSS" rel="stylesheet" type="text/css"/><link href="/history/css/Screen.css" id="ctl00_screenCSS" media="screen" rel="stylesheet" type="text/css"/><link href="/ssw/Images/icoSSW_2014.ico" rel="shortcut icon"/>














<link href="/ssw/include/googleSyntax/shCore.css" rel="stylesheet" type="text/css"/><link href="/ssw/include/googleSyntax/shThemeDefault.css" rel="stylesheet" type="text/css"/>

<link href="/history/css/Print.css" id="ctl00_printCSS" media="print" rel="stylesheet" type="text/css"/>
<!-- Start of pdi-ssw Zendesk Widget script -->

<!-- End of pdi-ssw Zendesk Widget script -->
<link href="https://a.omappapi.com/app/js/api.min.css" id="omapi-css" media="all" rel="stylesheet"/></head>
<body id="ctl00_MasterBody">
<form action="./RulesToBetterISAServer.aspx" id="aspnetForm" method="post" name="aspnetForm">
<div>
<input id="__VIEWSTATE" name="__VIEWSTATE" type="hidden" value="/wEPDwUKMTM2MDA3ODg2OQ9kFgJmD2QWAgIDD2QWAgIBD2QWCAIDDzwrAAUBAA8WAh4HVmlzaWJsZWhkZAIFDzwrAAUBAA8WAh8AaGRkAgcPPCsABQEADxYCHwBoZGQCCQ9kFgICAw9kFgICBg8PFgQeBFRleHQF9Ac8cCBzdHlsZT0iZm9udC1zaXplIDogMTFweDsgY29sb3IgOiAjYWFhIj5UaGVyZSB3YXMgYW4gZXJyb3IgZGlzcGxheWluZyB0aGUgdGVzdGltb25pYWxzLiBQbGVhc2UgPEEgSFJFRj0ibWFpbHRvOmluZm9Acyp3LmNvbS5hdT9TdWJqZWN0PUVycm9yIGRpc3BsYXlpbmcgVGVzdGltb25pYWxzJmJvZHk9IFVSTDogaHR0cHM6Ly9zc3cuY29tLmF1L3Nzdy9TdGFuZGFyZHMvUnVsZXMvUnVsZXNUb0JldHRlcklTQVNlcnZlci5hc3B4DQoNCiUwRCBFcnJvcjogQSBuZXR3b3JrLXJlbGF0ZWQgb3IgaW5zdGFuY2Utc3BlY2lmaWMgZXJyb3Igb2NjdXJyZWQgd2hpbGUgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvbiB0byBTUUwgU2VydmVyLiBUaGUgc2VydmVyIHdhcyBub3QgZm91bmQgb3Igd2FzIG5vdCBhY2Nlc3NpYmxlLiBWZXJpZnkgdGhhdCB0aGUgaW5zdGFuY2UgbmFtZSBpcyBjb3JyZWN0IGFuZCB0aGF0IFNRTCBTZXJ2ZXIgaXMgY29uZmlndXJlZCB0byBhbGxvdyByZW1vdGUgY29ubmVjdGlvbnMuIChwcm92aWRlcjogTmFtZWQgUGlwZXMgUHJvdmlkZXIsIGVycm9yOiA0MCAtIENvdWxkIG5vdCBvcGVuIGEgY29ubmVjdGlvbiB0byBTUUwgU2VydmVyKSI+cmVwb3J0IHRoaXMgZXJyb3I8L2E+IHRvIFNTVyBhbmQgaW5jbHVkZSB0aGUgZm9sbG93aW5nIHRleHQ6PGJyPiAtIEEgbmV0d29yay1yZWxhdGVkIG9yIGluc3RhbmNlLXNwZWNpZmljIGVycm9yIG9jY3VycmVkIHdoaWxlIGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb24gdG8gU1FMIFNlcnZlci4gVGhlIHNlcnZlciB3YXMgbm90IGZvdW5kIG9yIHdhcyBub3QgYWNjZXNzaWJsZS4gVmVyaWZ5IHRoYXQgdGhlIGluc3RhbmNlIG5hbWUgaXMgY29ycmVjdCBhbmQgdGhhdCBTUUwgU2VydmVyIGlzIGNvbmZpZ3VyZWQgdG8gYWxsb3cgcmVtb3RlIGNvbm5lY3Rpb25zLiAocHJvdmlkZXI6IE5hbWVkIFBpcGVzIFByb3ZpZGVyLCBlcnJvcjogNDAgLSBDb3VsZCBub3Qgb3BlbiBhIGNvbm5lY3Rpb24gdG8gU1FMIFNlcnZlcik8L3A+HwBnZGRkntNkAZHQGA2Pn/BBP6PLihIfpqoib3C7ygYOjSOgeJI="/>
</div>
<div>
<input id="__VIEWSTATEGENERATOR" name="__VIEWSTATEGENERATOR" type="hidden" value="9A8F4741"/>
</div>
<div id="header" title="SSW Rules to Better ISA Server">
<a href="/ssw/">
<img alt="SSW Logo" height="100" id="sswlogo" src="/history/images/SSWLogo.png" width="130"/></a>
<a href="/ssw/Company/AboutUs.aspx">
<img alt="Microsoft Gold Partner Logo" height="41" id="msgoldpartner" src="/history/company/images/small_partnerlogo.png" width="110"/></a>
<h1>
        SSW Rules to Better ISA Server</h1>
</div>
<div id="mainContainer">
<div>
</div>
<p>
<span id="ctl00_mainContentPlaceHolder_SiteMapPath1"><a href="#ctl00_mainContentPlaceHolder_SiteMapPath1_SkipLink"><img alt="Skip Navigation Links" height="0" src="/history/WebResource.axd" style="border-width:0px;" width="0"/></a><span><a href="/ssw/Default.aspx" title="Home">Home</a></span><span> &gt; </span><span><a href="/ssw/Standards/Default.aspx" title="SSW Standards">SSW Standards</a></span><span> &gt; </span><span><a href="/ssw/Standards/Rules/Default.aspx" title="Rules">Rules</a></span><span> &gt; </span><span>SSW Rules to Better ISA Server</span><a id="ctl00_mainContentPlaceHolder_SiteMapPath1_SkipLink"></a></span>
</p>
<span id="ctl00_mainContentPlaceHolder_testimonial_lblError"><p style="font-size : 11px; color : #aaa">There was an error displaying the testimonials. Please <a href="mailto:info@s*w.com.au?Subject=Error displaying Testimonials&amp;body= URL: https://ssw.com.au/ssw/Standards/Rules/RulesToBetterISAServer.aspx

%0D Error: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)">report this error</a> to SSW and include the following text:<br/> - A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)</p></span>

 

		
		<p>MS ISA Server (Internet Security and Acceleration Server) provides safe and fast Internet access for our office. It integrates a multi-stage firewall and scalable web cache which limits our bandwidth usage. </p>
<p>However, to run MS ISA Server in a most efficient way, we have developed a few rules for a better ISA usage. </p>
<p>Do you agree with them all? Are we missing some? <a href="javascript:sendEmail('6D61696C746F3A496E666F407373772E636F6D2E61753F5375626A6563743D52756C6573253230746F253230426574746572253230495341253230536572766572')">
    Let us know</a> what you think.</p>
<table align="right" cellpadding="2" cellspacing="2" class="clsSSWTableOfContents" style="{width:100%;}" summary="Index">
<tbody><tr>
<td>
<b>Rules to Better ISA Server</b><br/>
			1. <a href="#triggers">Do you use triggers for automatically announcements of server events?</a><br/>
			2. <a href="#blockbanners">Can I block those annoying Internet banners and save bandwidth?</a><br/>
            3. <a href="#logSQL">Do you log to SQL server?</a><br/>
			4. <a href="#customreports">Do you use custom reports?</a><br/>
            5. <a href="#authenticate">Do you require everyone to authenticate with your Internet connection?</a><br/>
</td>
</tr>
</tbody></table>
<p></p>
<p></p>
<ol>
<li>
<h2><a name="triggers"></a>Do you use triggers for 
      automatically announcements of server events?</h2>
</li>
<p>
		We have triggers on two different database tables, FirewallLog and WebProxyLog, which log all files downloaded from the web and uploaded to the web. These triggers created by MS SQL Server Enterprise Manager announce automatically all file transfers bigger than 50 MBs. Thus the network administrator can rest assured that the monthly bandwidth is not going to differ hudgley during the month as no monster downloads are performed without an 
		acknowledgement.  Note that this will not get all large downloads. 
		If a client uses a file splitter program like many download managers and 
		peer to peer programs then there will be a couple smaller size downloads 
		and this trigger will not be called.<br/>
 </p>
<li>
<h2><a name="blockbanners"></a>Can I block those annoying Internet banners and save bandwidth? </h2>
</li>
<p>
	There are two ways of blocking annoying banners with your ISA 2000 Server. Have a look into our <a href="../../KB/KB.asp?KBID=Q453237">Knowledge Base</a>. 
    <br/>
	There currently is no script file for ISA 2004. Once we make one or receive 
	one then we will put it up for public download.<br/>
 </p>
<li>
<h2><a name="logSQL"></a>Do you log to SQL server?</h2>
</li>
<p>
		By default ISA 2000 server logs to text files. ISA 2004 is better and 
		stores the data in a MSDE database. The only problem with this is that 
		you cannot connect to this MSDE database by default. You have to enable 
		TCP/IP and Named Pipes though the SQL Server Network Utility.<br/>
<img alt="SQL named pipes" border="0" height="246" src="/history/Images/SQLNamedPipes.gif" width="350"/></p>
<p>
		Also it only stored the last months data. After this time summary files are made to summarize the 
		month.<br/>
		Generally you want to keep data for a couple months and show the trend 
		over time.</p>
<p>
		The solution is to log to your own SQL server and manage the data 
		however you choose.</p>
<p>
<b>Warning:</b> This log can get extremely big very fast. Our 
		database is about 17gig and we only keep 6 months of data.</p>
<p>
		A good idea is to have a job that runs weekly that will delete any OLD 
		data to spare some space. </p>
<p>
		Also ISA performance is degraded when using ODBC logging (as opposed to 
		text logging). This is true whether the SQL server is on the same 
		machine or over the network. They both use per-entry logging to SQL and 
		will both stop serving requests if the logging destination fails. This 
		is not limited to SQL logging; if text or database logging fails, then 
		ISA will stop serving requests. If the logging destination is 
		unresponsive during startup, the services will not start.<br/>
		This is by design, since firewall logs are often used as evidence.</p>
<p>
		 </p>
<li>
<h2><a name="customreports"></a>Do you use custom reports?</h2>
<p>Now that we have got the data in SQL and at our disposal we can make some 
	meaningful reports</p>
<p>We can use reporting services to query the data directly and spit out 
	some reports. Exception reports can be made. Things like which employees are 
	Checking external mail (Hotmail, Yahoo, GMail) within work hours.</p>
<p>OLAP is also another great way to report on this mammoth amount of data. 
	Once a cube has been made and processed, management can quickly and easily 
	query this data though Data Analyzer or Excel. Reports such as bandwidth by 
	employee by time by date can easily be achieved. Because the SQL database 
	has been interrogated earlier that day these reports with would take a long 
	time to produce can come up instantly.</p>
<p><img alt="" border="0" height="326" src="/history/Images/ExcelOLAP.jpg" width="400"/> <img alt="" border="0" src="/history/Images/DAOLAP.jpg" width="400"/></p>
</li>
<li>
<h2>
<a name="authenticate"></a>Do you require everyone to authenticate with your Internet connection?</h2>
<p>We have these nice OLAP cubes from SQL for our Internet usage. However they are not very meaningful as we only know the clients IP and not who.  You could always ping the IP address to find the computer then find out who owns that computer but that is a lot of work.</p>
<p>The solution is to enforce authentication to the proxy.  This will slow users a little as every time they want to access some external content there computer has to authenticate every packet.</p>
<p><img alt="" border="0" height="160" src="/history/Images/ISAAuthentication.gif" width="613"/></p>
<p>When a customer/supplier turns up and wants a wireless Internet connection at your office, what do you say?</p>
<p>The answer should be </p>
<p>"No we don't allow wireless access to people not on our domain for security reasons. Instead there is a hub in the boardroom. Under it there is a sticker with manually IP addresses you can use."</p>
<p>This will be a special IP address which will bypass the authentication rule</p>
</li>
</ol>
<h2>Acknowledgements</h2>
<p>
<a href="/ssw/Employees/EmployeesProfile.aspx?EmpID=DH">Daniel Hyles</a><br/>
<a href="/ssw/Employees/EmployeesProfile.aspx?EmpID=AC">Adam Cogan</a></p>
<br/>
</div>

<div id="footer">
<p class="callnow">Call Now +61 2 9953 3000</p>
<span class="copyright">© Copyright SSW 1990-2023. All Rights Reserved.</span>
<ul>
<li class="first"><a class="email" href="javascript:sendEmail('696E666F407373772E636F6D2E61753F7375626A6563743D466565646261636B20746F2053535726626F64793D687474703A2F2F7373772E636F6D2E61752F7373772F5374616E64617264732F52756C65732F52756C6573546F4265747465724953415365727665722E61737078')" id="ctl00_fC_feedbackHyperLink" tabindex="100">Feedback to SSW</a></li>
<li><a href="/ssw/Company/AboutUs.aspx">About SSW</a></li>
<li><a href="/ssw/Advertising/Default.aspx">Advertising</a></li>
<li class="last"><a href="/ssw/MenuMap.aspx">Sitemap</a></li>
</ul>
<span class="proudly"><a href="http://www.ssw.com.au">Proudly developed by SSW Sydney Web Design</a></span>
<!-- span class="proudlyAjax"><a href="/ssw/Standards/Rules/RulesToBetterWebsitesAdministration.aspx#AJAX">Powered by MS AJAX</a></span -->
<p class="serverName">Our website is under constant continuous deployment. Last deployment to AZIIS2022P03. Unable to retrieve changeset details.</p>
</div>
</form>
<!--Here's the Google Tracking Code, only available on external servers because we only need to track for external.-->



<!-- This site is converting visitors into subscribers and customers with OptinMonster - http://optinmonster.com --><!-- / OptinMonster -->
<div style="visibility: visible;"><div></div><div><style>
        @-webkit-keyframes ww-78c2214f-5b26-445e-a5fe-9ccac1228ee9-launcherOnOpen {
          0% {
            -webkit-transform: translateY(0px) rotate(0deg);
                    transform: translateY(0px) rotate(0deg);
          }

          30% {
            -webkit-transform: translateY(-5px) rotate(2deg);
                    transform: translateY(-5px) rotate(2deg);
          }

          60% {
            -webkit-transform: translateY(0px) rotate(0deg);
                    transform: translateY(0px) rotate(0deg);
          }


          90% {
            -webkit-transform: translateY(-1px) rotate(0deg);
                    transform: translateY(-1px) rotate(0deg);

          }

          100% {
            -webkit-transform: translateY(-0px) rotate(0deg);
                    transform: translateY(-0px) rotate(0deg);
          }
        }
        @keyframes ww-78c2214f-5b26-445e-a5fe-9ccac1228ee9-launcherOnOpen {
          0% {
            -webkit-transform: translateY(0px) rotate(0deg);
                    transform: translateY(0px) rotate(0deg);
          }

          30% {
            -webkit-transform: translateY(-5px) rotate(2deg);
                    transform: translateY(-5px) rotate(2deg);
          }

          60% {
            -webkit-transform: translateY(0px) rotate(0deg);
                    transform: translateY(0px) rotate(0deg);
          }


          90% {
            -webkit-transform: translateY(-1px) rotate(0deg);
                    transform: translateY(-1px) rotate(0deg);

          }

          100% {
            -webkit-transform: translateY(-0px) rotate(0deg);
                    transform: translateY(-0px) rotate(0deg);
          }
        }

        @keyframes ww-78c2214f-5b26-445e-a5fe-9ccac1228ee9-widgetOnLoad {
          0% {
            opacity: 0;
          }
          100% {
            opacity: 1;
          }
        }

        @-webkit-keyframes ww-78c2214f-5b26-445e-a5fe-9ccac1228ee9-widgetOnLoad {
          0% {
            opacity: 0;
          }
          100% {
            opacity: 1;
          }
        }
      </style></div></div></body></html>