/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
* Licensed under the MIT License (LICENSE.txt).
*
* Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
* Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
* Thanks to: Seamus Leahy for adding deltaX and deltaY
*
* Version: 3.0.6
*
* Requires: 1.2.2+
*/
(function ($) { var types = ["DOMMouseScroll", "mousewheel"]; if ($.event.fixHooks) { for (var i = types.length; i; ) { $.event.fixHooks[types[--i]] = $.event.mouseHooks } } $.event.special.mousewheel = { setup: function () { if (this.addEventListener) { for (var i = types.length; i; ) { this.addEventListener(types[--i], handler, false) } } else { this.onmousewheel = handler } }, teardown: function () { if (this.removeEventListener) { for (var i = types.length; i; ) { this.removeEventListener(types[--i], handler, false) } } else { this.onmousewheel = null } } }; $.fn.extend({ mousewheel: function (fn) { return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel") }, unmousewheel: function (fn) { return this.unbind("mousewheel", fn) } }); function handler(event) { var orgEvent = event || window.event, args = [].slice.call(arguments, 1), delta = 0, returnValue = true, deltaX = 0, deltaY = 0; event = $.event.fix(orgEvent); event.type = "mousewheel"; if (orgEvent.wheelDelta) { delta = orgEvent.wheelDelta / 120 } if (orgEvent.detail) { delta = -orgEvent.detail / 3 } deltaY = delta; if (orgEvent.axis !== undefined && orgEvent.axis === orgEvent.HORIZONTAL_AXIS) { deltaY = 0; deltaX = -1 * delta } if (orgEvent.wheelDeltaY !== undefined) { deltaY = orgEvent.wheelDeltaY / 120 } if (orgEvent.wheelDeltaX !== undefined) { deltaX = -1 * orgEvent.wheelDeltaX / 120 } args.unshift(event, delta, deltaX, deltaY); return ($.event.dispatch || $.event.handle).apply(this, args) } })(jQuery);
/*!
* jScrollPane - v2.0.0beta11 - 2011-07-04
* http://jscrollpane.kelvinluck.com/
*
* Copyright (c) 2010 Kelvin Luck
* Dual licensed under the MIT and GPL licenses.
*/
(function ($, window, undefined) { $.fn.jScrollPane = function (settings) { function JScrollPane(elem, s) { var settings, jsp = this, pane, paneWidth, paneHeight, container, contentWidth, contentHeight, percentInViewH, percentInViewV, isScrollableV, isScrollableH, verticalDrag, dragMaxY, verticalDragPosition, horizontalDrag, dragMaxX, horizontalDragPosition, verticalBar, verticalTrack, scrollbarWidth, verticalTrackHeight, verticalDragHeight, arrowUp, arrowDown, horizontalBar, horizontalTrack, horizontalTrackWidth, horizontalDragWidth, arrowLeft, arrowRight, reinitialiseInterval, originalPadding, originalPaddingTotalWidth, previousContentWidth, wasAtTop = true, wasAtLeft = true, wasAtBottom = false, wasAtRight = false, originalElement = elem.clone(false, false).empty(), mwEvent = $.fn.mwheelIntent ? "mwheelIntent.jsp" : "mousewheel.jsp"; originalPadding = elem.css("paddingTop") + " " + elem.css("paddingRight") + " " + elem.css("paddingBottom") + " " + elem.css("paddingLeft"); originalPaddingTotalWidth = (parseInt(elem.css("paddingLeft"), 10) || 0) + (parseInt(elem.css("paddingRight"), 10) || 0); function initialise(s) { var isMaintainingPositon, lastContentX, lastContentY, hasContainingSpaceChanged, originalScrollTop, originalScrollLeft, maintainAtBottom = false, maintainAtRight = false; settings = s; if (pane === undefined) { originalScrollTop = elem.scrollTop(); originalScrollLeft = elem.scrollLeft(); elem.css({ overflow: "hidden", padding: 0 }); paneWidth = elem.innerWidth() + originalPaddingTotalWidth; paneHeight = elem.innerHeight(); elem.width(paneWidth); pane = $('<div class="jspPane" />').css("padding", originalPadding).append(elem.children()); container = $('<div class="jspContainer" />').css({ width: paneWidth + "px", height: paneHeight + "px" }).append(pane).appendTo(elem) } else { elem.css("width", ""); maintainAtBottom = settings.stickToBottom && isCloseToBottom(); maintainAtRight = settings.stickToRight && isCloseToRight(); hasContainingSpaceChanged = elem.innerWidth() + originalPaddingTotalWidth != paneWidth || elem.outerHeight() != paneHeight; if (hasContainingSpaceChanged) { paneWidth = elem.innerWidth() + originalPaddingTotalWidth; paneHeight = elem.innerHeight(); container.css({ width: paneWidth + "px", height: paneHeight + "px" }) } if (!hasContainingSpaceChanged && previousContentWidth == contentWidth && pane.outerHeight() == contentHeight) { elem.width(paneWidth); return } previousContentWidth = contentWidth; pane.css("width", ""); elem.width(paneWidth); container.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end() } pane.css("overflow", "auto"); if (s.contentWidth) { contentWidth = s.contentWidth } else { contentWidth = pane[0].scrollWidth } contentHeight = pane[0].scrollHeight; pane.css("overflow", ""); percentInViewH = contentWidth / paneWidth; percentInViewV = contentHeight / paneHeight; isScrollableV = percentInViewV > 1; isScrollableH = percentInViewH > 1; if (!(isScrollableH || isScrollableV)) { elem.removeClass("jspScrollable"); pane.css({ top: 0, width: container.width() - originalPaddingTotalWidth }); removeMousewheel(); removeFocusHandler(); removeKeyboardNav(); removeClickOnTrack(); unhijackInternalLinks() } else { elem.addClass("jspScrollable"); isMaintainingPositon = settings.maintainPosition && (verticalDragPosition || horizontalDragPosition); if (isMaintainingPositon) { lastContentX = contentPositionX(); lastContentY = contentPositionY() } initialiseVerticalScroll(); initialiseHorizontalScroll(); resizeScrollbars(); if (isMaintainingPositon) { scrollToX(maintainAtRight ? (contentWidth - paneWidth) : lastContentX, false); scrollToY(maintainAtBottom ? (contentHeight - paneHeight) : lastContentY, false) } initFocusHandler(); initMousewheel(); initTouch(); if (settings.enableKeyboardNavigation) { initKeyboardNav() } if (settings.clickOnTrack) { initClickOnTrack() } observeHash(); if (settings.hijackInternalLinks) { hijackInternalLinks() } } if (settings.autoReinitialise && !reinitialiseInterval) { reinitialiseInterval = setInterval(function () { initialise(settings) }, settings.autoReinitialiseDelay) } else { if (!settings.autoReinitialise && reinitialiseInterval) { clearInterval(reinitialiseInterval) } } originalScrollTop && elem.scrollTop(0) && scrollToY(originalScrollTop, false); originalScrollLeft && elem.scrollLeft(0) && scrollToX(originalScrollLeft, false); elem.trigger("jsp-initialised", [isScrollableH || isScrollableV]) } function initialiseVerticalScroll() { if (isScrollableV) { container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'), $('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'), $('<div class="jspDragBottom" />'))), $('<div class="jspCap jspCapBottom" />'))); verticalBar = container.find(">.jspVerticalBar"); verticalTrack = verticalBar.find(">.jspTrack"); verticalDrag = verticalTrack.find(">.jspDrag"); if (settings.showArrows) { arrowUp = $('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp", getArrowScroll(0, -1)).bind("click.jsp", nil); arrowDown = $('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp", getArrowScroll(0, 1)).bind("click.jsp", nil); if (settings.arrowScrollOnHover) { arrowUp.bind("mouseover.jsp", getArrowScroll(0, -1, arrowUp)); arrowDown.bind("mouseover.jsp", getArrowScroll(0, 1, arrowDown)) } appendArrows(verticalTrack, settings.verticalArrowPositions, arrowUp, arrowDown) } verticalTrackHeight = paneHeight; container.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function () { verticalTrackHeight -= $(this).outerHeight() }); verticalDrag.hover(function () { verticalDrag.addClass("jspHover") }, function () { verticalDrag.removeClass("jspHover") }).bind("mousedown.jsp", function (e) { $("html").bind("dragstart.jsp selectstart.jsp", nil); verticalDrag.addClass("jspActive"); var startY = e.pageY - verticalDrag.position().top; $("html").bind("mousemove.jsp", function (e) { positionDragY(e.pageY - startY, false) }).bind("mouseup.jsp mouseleave.jsp", cancelDrag); return false }); sizeVerticalScrollbar() } } function sizeVerticalScrollbar() { verticalTrack.height(verticalTrackHeight + "px"); verticalDragPosition = 0; scrollbarWidth = settings.verticalGutter + verticalTrack.outerWidth(); pane.width(paneWidth - scrollbarWidth - originalPaddingTotalWidth); try { if (verticalBar.position().left === 0) { pane.css("margin-left", scrollbarWidth + "px") } } catch (err) { } } function initialiseHorizontalScroll() { if (isScrollableH) { container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'), $('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'), $('<div class="jspDragRight" />'))), $('<div class="jspCap jspCapRight" />'))); horizontalBar = container.find(">.jspHorizontalBar"); horizontalTrack = horizontalBar.find(">.jspTrack"); horizontalDrag = horizontalTrack.find(">.jspDrag"); if (settings.showArrows) { arrowLeft = $('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp", getArrowScroll(-1, 0)).bind("click.jsp", nil); arrowRight = $('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp", getArrowScroll(1, 0)).bind("click.jsp", nil); if (settings.arrowScrollOnHover) { arrowLeft.bind("mouseover.jsp", getArrowScroll(-1, 0, arrowLeft)); arrowRight.bind("mouseover.jsp", getArrowScroll(1, 0, arrowRight)) } appendArrows(horizontalTrack, settings.horizontalArrowPositions, arrowLeft, arrowRight) } horizontalDrag.hover(function () { horizontalDrag.addClass("jspHover") }, function () { horizontalDrag.removeClass("jspHover") }).bind("mousedown.jsp", function (e) { $("html").bind("dragstart.jsp selectstart.jsp", nil); horizontalDrag.addClass("jspActive"); var startX = e.pageX - horizontalDrag.position().left; $("html").bind("mousemove.jsp", function (e) { positionDragX(e.pageX - startX, false) }).bind("mouseup.jsp mouseleave.jsp", cancelDrag); return false }); horizontalTrackWidth = container.innerWidth(); sizeHorizontalScrollbar() } } function sizeHorizontalScrollbar() { container.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function () { horizontalTrackWidth -= $(this).outerWidth() }); horizontalTrack.width(horizontalTrackWidth + "px"); horizontalDragPosition = 0 } function resizeScrollbars() { if (isScrollableH && isScrollableV) { var horizontalTrackHeight = horizontalTrack.outerHeight(), verticalTrackWidth = verticalTrack.outerWidth(); verticalTrackHeight -= horizontalTrackHeight; $(horizontalBar).find(">.jspCap:visible,>.jspArrow").each(function () { horizontalTrackWidth += $(this).outerWidth() }); horizontalTrackWidth -= verticalTrackWidth; paneHeight -= verticalTrackWidth; paneWidth -= horizontalTrackHeight; horizontalTrack.parent().append($('<div class="jspCorner" />').css("width", horizontalTrackHeight + "px")); sizeVerticalScrollbar(); sizeHorizontalScrollbar() } if (isScrollableH) { pane.width((container.outerWidth() - originalPaddingTotalWidth) + "px") } contentHeight = pane.outerHeight(); percentInViewV = contentHeight / paneHeight; if (isScrollableH) { horizontalDragWidth = Math.ceil(1 / percentInViewH * horizontalTrackWidth); if (horizontalDragWidth > settings.horizontalDragMaxWidth) { horizontalDragWidth = settings.horizontalDragMaxWidth } else { if (horizontalDragWidth < settings.horizontalDragMinWidth) { horizontalDragWidth = settings.horizontalDragMinWidth } } horizontalDrag.width(horizontalDragWidth + "px"); dragMaxX = horizontalTrackWidth - horizontalDragWidth; _positionDragX(horizontalDragPosition) } if (isScrollableV) { verticalDragHeight = Math.ceil(1 / percentInViewV * verticalTrackHeight); if (verticalDragHeight > settings.verticalDragMaxHeight) { verticalDragHeight = settings.verticalDragMaxHeight } else { if (verticalDragHeight < settings.verticalDragMinHeight) { verticalDragHeight = settings.verticalDragMinHeight } } verticalDrag.height(verticalDragHeight + "px"); dragMaxY = verticalTrackHeight - verticalDragHeight; _positionDragY(verticalDragPosition) } } function appendArrows(ele, p, a1, a2) { var p1 = "before", p2 = "after", aTemp; if (p == "os") { p = /Mac/.test(navigator.platform) ? "after" : "split" } if (p == p1) { p2 = p } else { if (p == p2) { p1 = p; aTemp = a1; a1 = a2; a2 = aTemp } } ele[p1](a1)[p2](a2) } function getArrowScroll(dirX, dirY, ele) { return function () { arrowScroll(dirX, dirY, this, ele); this.blur(); return false } } function arrowScroll(dirX, dirY, arrow, ele) { arrow = $(arrow).addClass("jspActive"); var eve, scrollTimeout, isFirst = true, doScroll = function () { if (dirX !== 0) { jsp.scrollByX(dirX * settings.arrowButtonSpeed) } if (dirY !== 0) { jsp.scrollByY(dirY * settings.arrowButtonSpeed) } scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.arrowRepeatFreq); isFirst = false }; doScroll(); eve = ele ? "mouseout.jsp" : "mouseup.jsp"; ele = ele || $("html"); ele.bind(eve, function () { arrow.removeClass("jspActive"); scrollTimeout && clearTimeout(scrollTimeout); scrollTimeout = null; ele.unbind(eve) }) } function initClickOnTrack() { removeClickOnTrack(); if (isScrollableV) { verticalTrack.bind("mousedown.jsp", function (e) { if (e.originalTarget === undefined || e.originalTarget == e.currentTarget) { var clickedTrack = $(this), offset = clickedTrack.offset(), direction = e.pageY - offset.top - verticalDragPosition, scrollTimeout, isFirst = true, doScroll = function () { var offset = clickedTrack.offset(), pos = e.pageY - offset.top - verticalDragHeight / 2, contentDragY = paneHeight * settings.scrollPagePercent, dragY = dragMaxY * contentDragY / (contentHeight - paneHeight); if (direction < 0) { if (verticalDragPosition - dragY > pos) { jsp.scrollByY(-contentDragY) } else { positionDragY(pos) } } else { if (direction > 0) { if (verticalDragPosition + dragY < pos) { jsp.scrollByY(contentDragY) } else { positionDragY(pos) } } else { cancelClick(); return } } scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.trackClickRepeatFreq); isFirst = false }, cancelClick = function () { scrollTimeout && clearTimeout(scrollTimeout); scrollTimeout = null; $(document).unbind("mouseup.jsp", cancelClick) }; doScroll(); $(document).bind("mouseup.jsp", cancelClick); return false } }) } if (isScrollableH) { horizontalTrack.bind("mousedown.jsp", function (e) { if (e.originalTarget === undefined || e.originalTarget == e.currentTarget) { var clickedTrack = $(this), offset = clickedTrack.offset(), direction = e.pageX - offset.left - horizontalDragPosition, scrollTimeout, isFirst = true, doScroll = function () { var offset = clickedTrack.offset(), pos = e.pageX - offset.left - horizontalDragWidth / 2, contentDragX = paneWidth * settings.scrollPagePercent, dragX = dragMaxX * contentDragX / (contentWidth - paneWidth); if (direction < 0) { if (horizontalDragPosition - dragX > pos) { jsp.scrollByX(-contentDragX) } else { positionDragX(pos) } } else { if (direction > 0) { if (horizontalDragPosition + dragX < pos) { jsp.scrollByX(contentDragX) } else { positionDragX(pos) } } else { cancelClick(); return } } scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.trackClickRepeatFreq); isFirst = false }, cancelClick = function () { scrollTimeout && clearTimeout(scrollTimeout); scrollTimeout = null; $(document).unbind("mouseup.jsp", cancelClick) }; doScroll(); $(document).bind("mouseup.jsp", cancelClick); return false } }) } } function removeClickOnTrack() { if (horizontalTrack) { horizontalTrack.unbind("mousedown.jsp") } if (verticalTrack) { verticalTrack.unbind("mousedown.jsp") } } function cancelDrag() { $("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"); if (verticalDrag) { verticalDrag.removeClass("jspActive") } if (horizontalDrag) { horizontalDrag.removeClass("jspActive") } } function positionDragY(destY, animate) { if (!isScrollableV) { return } if (destY < 0) { destY = 0 } else { if (destY > dragMaxY) { destY = dragMaxY } } if (animate === undefined) { animate = settings.animateScroll } if (animate) { jsp.animate(verticalDrag, "top", destY, _positionDragY) } else { verticalDrag.css("top", destY); _positionDragY(destY) } } function _positionDragY(destY) { if (destY === undefined) { destY = verticalDrag.position().top } container.scrollTop(0); verticalDragPosition = destY; var isAtTop = verticalDragPosition === 0, isAtBottom = verticalDragPosition == dragMaxY, percentScrolled = destY / dragMaxY, destTop = -percentScrolled * (contentHeight - paneHeight); if (wasAtTop != isAtTop || wasAtBottom != isAtBottom) { wasAtTop = isAtTop; wasAtBottom = isAtBottom; elem.trigger("jsp-arrow-change", [wasAtTop, wasAtBottom, wasAtLeft, wasAtRight]) } updateVerticalArrows(isAtTop, isAtBottom); pane.css("top", destTop); elem.trigger("jsp-scroll-y", [-destTop, isAtTop, isAtBottom]).trigger("scroll") } function positionDragX(destX, animate) { if (!isScrollableH) { return } if (destX < 0) { destX = 0 } else { if (destX > dragMaxX) { destX = dragMaxX } } if (animate === undefined) { animate = settings.animateScroll } if (animate) { jsp.animate(horizontalDrag, "left", destX, _positionDragX) } else { horizontalDrag.css("left", destX); _positionDragX(destX) } } function _positionDragX(destX) { if (destX === undefined) { destX = horizontalDrag.position().left } container.scrollTop(0); horizontalDragPosition = destX; var isAtLeft = horizontalDragPosition === 0, isAtRight = horizontalDragPosition == dragMaxX, percentScrolled = destX / dragMaxX, destLeft = -percentScrolled * (contentWidth - paneWidth); if (wasAtLeft != isAtLeft || wasAtRight != isAtRight) { wasAtLeft = isAtLeft; wasAtRight = isAtRight; elem.trigger("jsp-arrow-change", [wasAtTop, wasAtBottom, wasAtLeft, wasAtRight]) } updateHorizontalArrows(isAtLeft, isAtRight); pane.css("left", destLeft); elem.trigger("jsp-scroll-x", [-destLeft, isAtLeft, isAtRight]).trigger("scroll") } function updateVerticalArrows(isAtTop, isAtBottom) { if (settings.showArrows) { arrowUp[isAtTop ? "addClass" : "removeClass"]("jspDisabled"); arrowDown[isAtBottom ? "addClass" : "removeClass"]("jspDisabled") } } function updateHorizontalArrows(isAtLeft, isAtRight) { if (settings.showArrows) { arrowLeft[isAtLeft ? "addClass" : "removeClass"]("jspDisabled"); arrowRight[isAtRight ? "addClass" : "removeClass"]("jspDisabled") } } function scrollToY(destY, animate) { var percentScrolled = destY / (contentHeight - paneHeight); positionDragY(percentScrolled * dragMaxY, animate) } function scrollToX(destX, animate) { var percentScrolled = destX / (contentWidth - paneWidth); positionDragX(percentScrolled * dragMaxX, animate) } function scrollToElement(ele, stickToTop, animate) { var e, eleHeight, eleWidth, eleTop = 0, eleLeft = 0, viewportTop, viewportLeft, maxVisibleEleTop, maxVisibleEleLeft, destY, destX; try { e = $(ele) } catch (err) { return } eleHeight = e.outerHeight(); eleWidth = e.outerWidth(); container.scrollTop(0); container.scrollLeft(0); while (!e.is(".jspPane")) { eleTop += e.position().top; eleLeft += e.position().left; e = e.offsetParent(); if (/^body|html$/i.test(e[0].nodeName)) { return } } viewportTop = contentPositionY(); maxVisibleEleTop = viewportTop + paneHeight; if (eleTop < viewportTop || stickToTop) { destY = eleTop - settings.verticalGutter } else { if (eleTop + eleHeight > maxVisibleEleTop) { destY = eleTop - paneHeight + eleHeight + settings.verticalGutter } } if (destY) { scrollToY(destY, animate) } viewportLeft = contentPositionX(); maxVisibleEleLeft = viewportLeft + paneWidth; if (eleLeft < viewportLeft || stickToTop) { destX = eleLeft - settings.horizontalGutter } else { if (eleLeft + eleWidth > maxVisibleEleLeft) { destX = eleLeft - paneWidth + eleWidth + settings.horizontalGutter } } if (destX) { scrollToX(destX, animate) } } function contentPositionX() { return -pane.position().left } function contentPositionY() { return -pane.position().top } function isCloseToBottom() { var scrollableHeight = contentHeight - paneHeight; return (scrollableHeight > 20) && (scrollableHeight - contentPositionY() < 10) } function isCloseToRight() { var scrollableWidth = contentWidth - paneWidth; return (scrollableWidth > 20) && (scrollableWidth - contentPositionX() < 10) } function initMousewheel() { container.unbind(mwEvent).bind(mwEvent, function (event, delta, deltaX, deltaY) { var dX = horizontalDragPosition, dY = verticalDragPosition; jsp.scrollBy(deltaX * settings.mouseWheelSpeed, -deltaY * settings.mouseWheelSpeed, false); return dX == horizontalDragPosition && dY == verticalDragPosition }) } function removeMousewheel() { container.unbind(mwEvent) } function nil() { return false } function initFocusHandler() { pane.find(":input,a").unbind("focus.jsp").bind("focus.jsp", function (e) { scrollToElement(e.target, false) }) } function removeFocusHandler() { pane.find(":input,a").unbind("focus.jsp") } function initKeyboardNav() { var keyDown, elementHasScrolled, validParents = []; isScrollableH && validParents.push(horizontalBar[0]); isScrollableV && validParents.push(verticalBar[0]); pane.focus(function () { elem.focus() }); elem.attr("tabindex", 0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp", function (e) { if (e.target !== this && !(validParents.length && $(e.target).closest(validParents).length)) { return } var dX = horizontalDragPosition, dY = verticalDragPosition; switch (e.keyCode) { case 40: case 38: case 34: case 32: case 33: case 39: case 37: keyDown = e.keyCode; keyDownHandler(); break; case 35: scrollToY(contentHeight - paneHeight); keyDown = null; break; case 36: scrollToY(0); keyDown = null; break } elementHasScrolled = e.keyCode == keyDown && dX != horizontalDragPosition || dY != verticalDragPosition; return !elementHasScrolled }).bind("keypress.jsp", function (e) { if (e.keyCode == keyDown) { keyDownHandler() } return !elementHasScrolled }); if (settings.hideFocus) { elem.css("outline", "none"); if ("hideFocus" in container[0]) { elem.attr("hideFocus", true) } } else { elem.css("outline", ""); if ("hideFocus" in container[0]) { elem.attr("hideFocus", false) } } function keyDownHandler() { var dX = horizontalDragPosition, dY = verticalDragPosition; switch (keyDown) { case 40: jsp.scrollByY(settings.keyboardSpeed, false); break; case 38: jsp.scrollByY(-settings.keyboardSpeed, false); break; case 34: case 32: jsp.scrollByY(paneHeight * settings.scrollPagePercent, false); break; case 33: jsp.scrollByY(-paneHeight * settings.scrollPagePercent, false); break; case 39: jsp.scrollByX(settings.keyboardSpeed, false); break; case 37: jsp.scrollByX(-settings.keyboardSpeed, false); break } elementHasScrolled = dX != horizontalDragPosition || dY != verticalDragPosition; return elementHasScrolled } } function removeKeyboardNav() { elem.attr("tabindex", "-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp") } function observeHash() { if (location.hash && location.hash.length > 1) { var e, retryInt, hash = escape(location.hash); try { e = $(hash) } catch (err) { return } if (e.length && pane.find(hash)) { if (container.scrollTop() === 0) { retryInt = setInterval(function () { if (container.scrollTop() > 0) { scrollToElement(hash, true); $(document).scrollTop(container.position().top); clearInterval(retryInt) } }, 50) } else { scrollToElement(hash, true); $(document).scrollTop(container.position().top) } } } } function unhijackInternalLinks() { $("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack") } function hijackInternalLinks() { unhijackInternalLinks(); $("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack", function () { var uriParts = this.href.split("#"), hash; if (uriParts.length > 1) { hash = uriParts[1]; if (hash.length > 0 && pane.find("#" + hash).length > 0) { scrollToElement("#" + hash, true); return false } } }) } function initTouch() { var startX, startY, touchStartX, touchStartY, moved, moving = false; container.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp", function (e) { var touch = e.originalEvent.touches[0]; startX = contentPositionX(); startY = contentPositionY(); touchStartX = touch.pageX; touchStartY = touch.pageY; moved = false; moving = true }).bind("touchmove.jsp", function (ev) { if (!moving) { return } var touchPos = ev.originalEvent.touches[0], dX = horizontalDragPosition, dY = verticalDragPosition; jsp.scrollTo(startX + touchStartX - touchPos.pageX, startY + touchStartY - touchPos.pageY); moved = moved || Math.abs(touchStartX - touchPos.pageX) > 5 || Math.abs(touchStartY - touchPos.pageY) > 5; return dX == horizontalDragPosition && dY == verticalDragPosition }).bind("touchend.jsp", function (e) { moving = false }).bind("click.jsp-touchclick", function (e) { if (moved) { moved = false; return false } }) } function destroy() { var currentY = contentPositionY(), currentX = contentPositionX(); elem.removeClass("jspScrollable").unbind(".jsp"); elem.replaceWith(originalElement.append(pane.children())); originalElement.scrollTop(currentY); originalElement.scrollLeft(currentX) } $.extend(jsp, { reinitialise: function (s) { s = $.extend({}, settings, s); initialise(s) }, scrollToElement: function (ele, stickToTop, animate) { scrollToElement(ele, stickToTop, animate) }, scrollTo: function (destX, destY, animate) { scrollToX(destX, animate); scrollToY(destY, animate) }, scrollToX: function (destX, animate) { scrollToX(destX, animate) }, scrollToY: function (destY, animate) { scrollToY(destY, animate) }, scrollToPercentX: function (destPercentX, animate) { scrollToX(destPercentX * (contentWidth - paneWidth), animate) }, scrollToPercentY: function (destPercentY, animate) { scrollToY(destPercentY * (contentHeight - paneHeight), animate) }, scrollBy: function (deltaX, deltaY, animate) { jsp.scrollByX(deltaX, animate); jsp.scrollByY(deltaY, animate) }, scrollByX: function (deltaX, animate) { var destX = contentPositionX() + Math[deltaX < 0 ? "floor" : "ceil"](deltaX), percentScrolled = destX / (contentWidth - paneWidth); positionDragX(percentScrolled * dragMaxX, animate) }, scrollByY: function (deltaY, animate) { var destY = contentPositionY() + Math[deltaY < 0 ? "floor" : "ceil"](deltaY), percentScrolled = destY / (contentHeight - paneHeight); positionDragY(percentScrolled * dragMaxY, animate) }, positionDragX: function (x, animate) { positionDragX(x, animate) }, positionDragY: function (y, animate) { positionDragY(y, animate) }, animate: function (ele, prop, value, stepCallback) { var params = {}; params[prop] = value; ele.animate(params, { duration: settings.animateDuration, easing: settings.animateEase, queue: false, step: stepCallback }) }, getContentPositionX: function () { return contentPositionX() }, getContentPositionY: function () { return contentPositionY() }, getContentWidth: function () { return contentWidth }, getContentHeight: function () { return contentHeight }, getPercentScrolledX: function () { return contentPositionX() / (contentWidth - paneWidth) }, getPercentScrolledY: function () { return contentPositionY() / (contentHeight - paneHeight) }, getIsScrollableH: function () { return isScrollableH }, getIsScrollableV: function () { return isScrollableV }, getContentPane: function () { return pane }, scrollToBottom: function (animate) { positionDragY(dragMaxY, animate) }, hijackInternalLinks: function () { hijackInternalLinks() }, destroy: function () { destroy() } }); initialise(s) } settings = $.extend({}, $.fn.jScrollPane.defaults, settings); $.each(["mouseWheelSpeed", "arrowButtonSpeed", "trackClickSpeed", "keyboardSpeed"], function () { settings[this] = settings[this] || settings.speed }); return this.each(function () { var elem = $(this), jspApi = elem.data("jsp"); if (jspApi) { jspApi.reinitialise(settings) } else { jspApi = new JScrollPane(elem, settings); elem.data("jsp", jspApi) } }) }; $.fn.jScrollPane.defaults = { showArrows: false, maintainPosition: true, stickToBottom: false, stickToRight: false, clickOnTrack: true, autoReinitialise: false, autoReinitialiseDelay: 500, verticalDragMinHeight: 0, verticalDragMaxHeight: 99999, horizontalDragMinWidth: 0, horizontalDragMaxWidth: 99999, contentWidth: undefined, animateScroll: false, animateDuration: 300, animateEase: "linear", hijackInternalLinks: false, verticalGutter: 1, horizontalGutter: 1, mouseWheelSpeed: 0, arrowButtonSpeed: 0, arrowRepeatFreq: 50, arrowScrollOnHover: false, trackClickSpeed: 0, trackClickRepeatFreq: 70, verticalArrowPositions: "split", horizontalArrowPositions: "split", enableKeyboardNavigation: true, hideFocus: false, keyboardSpeed: 0, initialDelay: 300, speed: 30, scrollPagePercent: 0.8} })(jQuery, this); (function (a) { var b = function (b, c) { var d = a.extend({}, a.fn.nivoSlider.defaults, c); var e = { currentSlide: 0, currentImage: "", totalSlides: 0, running: false, paused: false, stop: false }; var f = a(b); f.data("nivo:vars", e); f.css("position", "relative"); f.addClass("nivoSlider"); var g = f.children(); g.each(function () { var b = a(this); var c = ""; if (!b.is("img")) { if (b.is("a")) { b.addClass("nivo-imageLink"); c = b } b = b.find("img:first") } var d = b.width(); if (d == 0) { d = b.attr("width") } var g = b.height(); if (g == 0) { g = b.attr("height") } if (d > f.width()) { f.width(d) } if (g > f.height()) { f.height(g) } if (c != "") { c.css("display", "none") } b.css("display", "none"); e.totalSlides++ }); if (d.randomStart) { d.startSlide = Math.floor(Math.random() * e.totalSlides) } if (d.startSlide > 0) { if (d.startSlide >= e.totalSlides) { d.startSlide = e.totalSlides - 1 } e.currentSlide = d.startSlide } if (a(g[e.currentSlide]).is("img")) { e.currentImage = a(g[e.currentSlide]) } else { e.currentImage = a(g[e.currentSlide]).find("img:first") } if (a(g[e.currentSlide]).is("a")) { a(g[e.currentSlide]).css("display", "block") } f.css("background", 'url("' + e.currentImage.attr("src") + '") no-repeat'); f.append(a('<div class="nivo-caption"><p></p></div>').css({ display: "none", opacity: d.captionOpacity })); a(".nivo-caption", f).css("opacity", 0); var h = function (b) { var c = a(".nivo-caption", f); if (e.currentImage.attr("title") != "" && e.currentImage.attr("title") != undefined) { var d = e.currentImage.attr("title"); if (d.substr(0, 1) == "#") { d = a(d).html() } if (c.css("opacity") != 0) { c.find("p").stop().fadeTo(b.animSpeed, 0, function () { a(this).html(d); a(this).stop().fadeTo(b.animSpeed, 1) }) } else { c.find("p").html(d) } c.stop().fadeTo(b.animSpeed, b.captionOpacity) } else { c.stop().fadeTo(b.animSpeed, 0) } }; h(d); var i = 0; if (!d.manualAdvance && g.length > 1) { i = setInterval(function () { o(f, g, d, false) }, d.pauseTime) } if (d.directionNav) { f.append('<div class="nivo-directionNav"><a class="nivo-prevNav">' + d.prevText + '</a><a class="nivo-nextNav">' + d.nextText + "</a></div>"); if (d.directionNavHide) { a(".nivo-directionNav", f).hide(); f.hover(function () { a(".nivo-directionNav", f).show() }, function () { a(".nivo-directionNav", f).hide() }) } a("a.nivo-prevNav", f).live("click", function () { if (e.running) { return false } clearInterval(i); i = ""; e.currentSlide -= 2; o(f, g, d, "prev") }); a("a.nivo-nextNav", f).live("click", function () { if (e.running) { return false } clearInterval(i); i = ""; o(f, g, d, "next") }) } if (d.controlNav) { var j = a('<div class="nivo-controlNav"></div>'); f.append(j); for (var k = 0; k < g.length; k++) { if (d.controlNavThumbs) { var l = g.eq(k); if (!l.is("img")) { l = l.find("img:first") } if (d.controlNavThumbsFromRel) { j.append('<a class="nivo-control" rel="' + k + '"><img src="' + l.attr("rel") + '" alt="" /></a>') } else { j.append('<a class="nivo-control" rel="' + k + '"><img src="' + l.attr("src").replace(d.controlNavThumbsSearch, d.controlNavThumbsReplace) + '" alt="" /></a>') } } else { j.append('<a class="nivo-control" rel="' + k + '">' + (k + 1) + "</a>") } } a(".nivo-controlNav a:eq(" + e.currentSlide + ")", f).addClass("active"); a(".nivo-controlNav a", f).live("click", function () { if (e.running) { return false } if (a(this).hasClass("active")) { return false } clearInterval(i); i = ""; f.css("background", 'url("' + e.currentImage.attr("src") + '") no-repeat'); e.currentSlide = a(this).attr("rel") - 1; o(f, g, d, "control") }) } if (d.keyboardNav) { a(window).keypress(function (a) { if (a.keyCode == "37") { if (e.running) { return false } clearInterval(i); i = ""; e.currentSlide -= 2; o(f, g, d, "prev") } if (a.keyCode == "39") { if (e.running) { return false } clearInterval(i); i = ""; o(f, g, d, "next") } }) } if (d.pauseOnHover) { f.hover(function () { e.paused = true; clearInterval(i); i = "" }, function () { e.paused = false; if (i == "" && !d.manualAdvance) { i = setInterval(function () { o(f, g, d, false) }, d.pauseTime) } }) } f.bind("nivo:animFinished", function () { e.running = false; a(g).each(function () { if (a(this).is("a")) { a(this).css("display", "none") } }); if (a(g[e.currentSlide]).is("a")) { a(g[e.currentSlide]).css("display", "block") } if (i == "" && !e.paused && !d.manualAdvance) { i = setInterval(function () { o(f, g, d, false) }, d.pauseTime) } d.afterChange.call(this) }); var m = function (b, c, d) { for (var e = 0; e < c.slices; e++) { var f = Math.round(b.width() / c.slices); if (e == c.slices - 1) { b.append(a('<div class="nivo-slice"></div>').css({ left: f * e + "px", width: b.width() - f * e + "px", height: "0px", opacity: "0", background: 'url("' + d.currentImage.attr("src") + '") no-repeat -' + (f + e * f - f) + "px 0%" })) } else { b.append(a('<div class="nivo-slice"></div>').css({ left: f * e + "px", width: f + "px", height: "0px", opacity: "0", background: 'url("' + d.currentImage.attr("src") + '") no-repeat -' + (f + e * f - f) + "px 0%" })) } } }; var n = function (b, c, d) { var e = Math.round(b.width() / c.boxCols); var f = Math.round(b.height() / c.boxRows); for (var g = 0; g < c.boxRows; g++) { for (var h = 0; h < c.boxCols; h++) { if (h == c.boxCols - 1) { b.append(a('<div class="nivo-box"></div>').css({ opacity: 0, left: e * h + "px", top: f * g + "px", width: b.width() - e * h + "px", height: f + "px", background: 'url("' + d.currentImage.attr("src") + '") no-repeat -' + (e + h * e - e) + "px -" + (f + g * f - f) + "px" })) } else { b.append(a('<div class="nivo-box"></div>').css({ opacity: 0, left: e * h + "px", top: f * g + "px", width: e + "px", height: f + "px", background: 'url("' + d.currentImage.attr("src") + '") no-repeat -' + (e + h * e - e) + "px -" + (f + g * f - f) + "px" })) } } } }; var o = function (b, c, d, e) { var f = b.data("nivo:vars"); if (f && f.currentSlide == f.totalSlides - 1) { d.lastSlide.call(this) } if ((!f || f.stop) && !e) { return false } d.beforeChange.call(this); if (!e) { b.css("background", 'url("' + f.currentImage.attr("src") + '") no-repeat') } else { if (e == "prev") { b.css("background", 'url("' + f.currentImage.attr("src") + '") no-repeat') } if (e == "next") { b.css("background", 'url("' + f.currentImage.attr("src") + '") no-repeat') } } f.currentSlide++; if (f.currentSlide == f.totalSlides) { f.currentSlide = 0; d.slideshowEnd.call(this) } if (f.currentSlide < 0) { f.currentSlide = f.totalSlides - 1 } if (a(c[f.currentSlide]).is("img")) { f.currentImage = a(c[f.currentSlide]) } else { f.currentImage = a(c[f.currentSlide]).find("img:first") } if (d.controlNav) { a(".nivo-controlNav a", b).removeClass("active"); a(".nivo-controlNav a:eq(" + f.currentSlide + ")", b).addClass("active") } h(d); a(".nivo-slice", b).remove(); a(".nivo-box", b).remove(); var g = d.effect; if (d.effect == "random") { var i = new Array("sliceDownRight", "sliceDownLeft", "sliceUpRight", "sliceUpLeft", "sliceUpDown", "sliceUpDownLeft", "fold", "fade", "boxRandom", "boxRain", "boxRainReverse", "boxRainGrow", "boxRainGrowReverse"); g = i[Math.floor(Math.random() * (i.length + 1))]; if (g == undefined) { g = "fade" } } if (d.effect.indexOf(",") != -1) { var i = d.effect.split(","); g = i[Math.floor(Math.random() * i.length)]; if (g == undefined) { g = "fade" } } if (f.currentImage.attr("data-transition")) { g = f.currentImage.attr("data-transition") } f.running = true; if (g == "sliceDown" || g == "sliceDownRight" || g == "sliceDownLeft") { m(b, d, f); var j = 0; var k = 0; var l = a(".nivo-slice", b); if (g == "sliceDownLeft") { l = a(".nivo-slice", b)._reverse() } l.each(function () { var c = a(this); c.css({ top: "0px" }); if (k == d.slices - 1) { setTimeout(function () { c.animate({ height: "100%", opacity: "1.0" }, d.animSpeed, "", function () { b.trigger("nivo:animFinished") }) }, 100 + j) } else { setTimeout(function () { c.animate({ height: "100%", opacity: "1.0" }, d.animSpeed) }, 100 + j) } j += 50; k++ }) } else { if (g == "sliceUp" || g == "sliceUpRight" || g == "sliceUpLeft") { m(b, d, f); var j = 0; var k = 0; var l = a(".nivo-slice", b); if (g == "sliceUpLeft") { l = a(".nivo-slice", b)._reverse() } l.each(function () { var c = a(this); c.css({ bottom: "0px" }); if (k == d.slices - 1) { setTimeout(function () { c.animate({ height: "100%", opacity: "1.0" }, d.animSpeed, "", function () { b.trigger("nivo:animFinished") }) }, 100 + j) } else { setTimeout(function () { c.animate({ height: "100%", opacity: "1.0" }, d.animSpeed) }, 100 + j) } j += 50; k++ }) } else { if (g == "sliceUpDown" || g == "sliceUpDownRight" || g == "sliceUpDownLeft") { m(b, d, f); var j = 0; var k = 0; var o = 0; var l = a(".nivo-slice", b); if (g == "sliceUpDownLeft") { l = a(".nivo-slice", b)._reverse() } l.each(function () { var c = a(this); if (k == 0) { c.css("top", "0px"); k++ } else { c.css("bottom", "0px"); k = 0 } if (o == d.slices - 1) { setTimeout(function () { c.animate({ height: "100%", opacity: "1.0" }, d.animSpeed, "", function () { b.trigger("nivo:animFinished") }) }, 100 + j) } else { setTimeout(function () { c.animate({ height: "100%", opacity: "1.0" }, d.animSpeed) }, 100 + j) } j += 50; o++ }) } else { if (g == "fold") { m(b, d, f); var j = 0; var k = 0; a(".nivo-slice", b).each(function () { var c = a(this); var e = c.width(); c.css({ top: "0px", height: "100%", width: "0px" }); if (k == d.slices - 1) { setTimeout(function () { c.animate({ width: e, opacity: "1.0" }, d.animSpeed, "", function () { b.trigger("nivo:animFinished") }) }, 100 + j) } else { setTimeout(function () { c.animate({ width: e, opacity: "1.0" }, d.animSpeed) }, 100 + j) } j += 50; k++ }) } else { if (g == "fade") { m(b, d, f); var q = a(".nivo-slice:first", b); q.css({ height: "100%", width: b.width() + "px" }); q.animate({ opacity: "1.0" }, d.animSpeed * 2, "", function () { b.trigger("nivo:animFinished") }) } else { if (g == "slideInRight") { m(b, d, f); var q = a(".nivo-slice:first", b); q.css({ height: "100%", width: "0px", opacity: "1" }); q.animate({ width: b.width() + "px" }, d.animSpeed * 2, "", function () { b.trigger("nivo:animFinished") }) } else { if (g == "slideInLeft") { m(b, d, f); var q = a(".nivo-slice:first", b); q.css({ height: "100%", width: "0px", opacity: "1", left: "", right: "0px" }); q.animate({ width: b.width() + "px" }, d.animSpeed * 2, "", function () { q.css({ left: "0px", right: "" }); b.trigger("nivo:animFinished") }) } else { if (g == "boxRandom") { n(b, d, f); var r = d.boxCols * d.boxRows; var k = 0; var j = 0; var s = p(a(".nivo-box", b)); s.each(function () { var c = a(this); if (k == r - 1) { setTimeout(function () { c.animate({ opacity: "1" }, d.animSpeed, "", function () { b.trigger("nivo:animFinished") }) }, 100 + j) } else { setTimeout(function () { c.animate({ opacity: "1" }, d.animSpeed) }, 100 + j) } j += 20; k++ }) } else { if (g == "boxRain" || g == "boxRainReverse" || g == "boxRainGrow" || g == "boxRainGrowReverse") { n(b, d, f); var r = d.boxCols * d.boxRows; var k = 0; var j = 0; var t = 0; var u = 0; var v = new Array; v[t] = new Array; var s = a(".nivo-box", b); if (g == "boxRainReverse" || g == "boxRainGrowReverse") { s = a(".nivo-box", b)._reverse() } s.each(function () { v[t][u] = a(this); u++; if (u == d.boxCols) { t++; u = 0; v[t] = new Array } }); for (var w = 0; w < d.boxCols * 2; w++) { var x = w; for (var y = 0; y < d.boxRows; y++) { if (x >= 0 && x < d.boxCols) { (function (c, e, f, h, i) { var j = a(v[c][e]); var k = j.width(); var l = j.height(); if (g == "boxRainGrow" || g == "boxRainGrowReverse") { j.width(0).height(0) } if (h == i - 1) { setTimeout(function () { j.animate({ opacity: "1", width: k, height: l }, d.animSpeed / 1.3, "", function () { b.trigger("nivo:animFinished") }) }, 100 + f) } else { setTimeout(function () { j.animate({ opacity: "1", width: k, height: l }, d.animSpeed / 1.3) }, 100 + f) } })(y, x, j, k, r); k++ } x-- } j += 100 } } } } } } } } } } }; var p = function (a) { for (var b, c, d = a.length; d; b = parseInt(Math.random() * d), c = a[--d], a[d] = a[b], a[b] = c) { } return a }; var q = function (a) { if (this.console && typeof console.log != "undefined") { console.log(a) } }; this.stop = function () { if (!a(b).data("nivo:vars").stop) { a(b).data("nivo:vars").stop = true; q("Stop Slider") } }; this.start = function () { if (a(b).data("nivo:vars").stop) { a(b).data("nivo:vars").stop = false; q("Start Slider") } }; d.afterLoad.call(this); return this }; a.fn.nivoSlider = function (c) { return this.each(function (d, e) { var f = a(this); if (f.data("nivoslider")) { return f.data("nivoslider") } var g = new b(this, c); f.data("nivoslider", g) }) }; a.fn.nivoSlider.defaults = { effect: "random", slices: 15, boxCols: 8, boxRows: 4, animSpeed: 500, pauseTime: 3000, startSlide: 0, directionNav: true, directionNavHide: true, controlNav: true, controlNavThumbs: false, controlNavThumbsFromRel: false, controlNavThumbsSearch: ".jpg", controlNavThumbsReplace: "_thumb.jpg", keyboardNav: true, pauseOnHover: true, manualAdvance: false, captionOpacity: 0.8, prevText: "Prev", nextText: "Next", randomStart: false, beforeChange: function () { }, afterChange: function () { }, slideshowEnd: function () { }, lastSlide: function () { }, afterLoad: function () { } }; a.fn._reverse = [].reverse })(jQuery); var fadeDuration = 150; $(document).ready(function () { $(".accordion-sydney, .map-sydney").click(function () { if ($(".location-sydney-details").is(":hidden") == true) { $(".accordionButton").removeClass("on"); $(".accordionContent").slideUp("normal"); $(".accordion-sydney").addClass("on"); $(".location-sydney-details").slideDown("normal"); $(".location-map").removeClass("brisbane"); $(".location-map").addClass("sydney"); $(".dot-brisbane").fadeIn("normal") } }); $(".accordion-brisbane, .map-brisbane").click(function () { if ($(".location-brisbane-details").is(":hidden") == true) { $(".accordionButton").removeClass("on"); $(".accordionContent").slideUp("normal"); $(".accordion-brisbane").addClass("on"); $(".location-brisbane-details").slideDown("normal"); $(".location-map").removeClass("sydney"); $(".location-map").addClass("brisbane"); $(".dot-sydney").fadeIn("normal") } }); $(".accordion-sydney, .map-sydney").hover(function () { $(".accordion-sydney").addClass("over"); $(".map-sydney h6").show().animate({ left: 30 }, fadeDuration); if ($(".accordion-sydney").hasClass("on") != true) { $(".dot-sydney").hide() } }, function () { $(".accordion-sydney").removeClass("over"); $(".map-sydney h6").animate({ left: 0 }, fadeDuration).fadeOut(fadeDuration); if ($(".accordion-sydney").hasClass("on") != true) { $(".dot-sydney").show() } }); $(".accordion-brisbane, .map-brisbane").hover(function () { $(".accordion-brisbane").addClass("over"); $(".map-brisbane h6").show().animate({ left: 50 }, fadeDuration); if ($(".accordion-brisbane").hasClass("on") != true) { $(".dot-brisbane").hide() } }, function () { $(".accordion-brisbane").removeClass("over"); $(".map-brisbane h6").animate({ left: 0 }, fadeDuration).fadeOut(fadeDuration); if ($(".accordion-brisbane").hasClass("on") != true) { $(".dot-brisbane").show() } }); $(".location-brisbane-details").hide(); $(".dot-sydney").hide(); $(".location-map h6").hide() }); $(".search-box").click(function () { $(this).animate({ width: "117px" }, 600); $(this).css({ color: "#333333" }); $(this).css({ background: 'url("/SSW/images/Raven/search-submit.png") 3px 2px no-repeat #ffffff' }) }); $(".search-box").focusout(function () { $(this).animate({ width: "1px" }, 600); $(this).css({ color: "#999999" }); $(this).css({ background: 'url("/SSW/images/Raven/search-submit.png") 3px 2px no-repeat #999999' }) }); $(document).ready(function () { $(".accordionHeading").click(function () { $(".accordionHeading").removeClass("on"); $(".accordionText").slideUp("normal"); if ($(this).next().is(":hidden") == true) { $(this).addClass("on"); $(this).next().slideDown("normal") } }); $(".accordionHeading").mouseover(function () { $(this).addClass("over") }).mouseout(function () { $(this).removeClass("over") }); $(".accordionText").hide() });
/*!
* fancyBox - jQuery Plugin
* version: 2.0.5 (21/02/2012)
* @requires jQuery v1.6 or later
*
* Examples at http://fancyapps.com/fancybox/
* License: www.fancyapps.com/fancybox/#license
*
* Copyright 2012 Janis Skarnelis - janis@fancyapps.com
*
*/
(function (window, document, $) { var W = $(window), D = $(document), F = $.fancybox = function () { F.open.apply(this, arguments) }, didResize = false, resizeTimer = null, isMobile = typeof document.createTouch !== "undefined"; $.extend(F, { version: "2.0.5", defaults: { padding: 15, margin: 20, width: 800, height: 600, minWidth: 100, minHeight: 100, maxWidth: 9999, maxHeight: 9999, autoSize: true, autoResize: !isMobile, autoCenter: !isMobile, fitToView: true, aspectRatio: false, topRatio: 0.5, fixed: !($.browser.msie && $.browser.version <= 6) && !isMobile, scrolling: "auto", wrapCSS: "fancybox-default", arrows: true, closeBtn: true, closeClick: false, nextClick: false, mouseWheel: true, autoPlay: false, playSpeed: 3000, preload: 3, modal: false, loop: true, ajax: { dataType: "html", headers: { "X-fancyBox": true} }, keys: { next: [13, 32, 34, 39, 40], prev: [8, 33, 37, 38], close: [27] }, index: 0, type: null, href: null, content: null, title: null, tpl: { wrap: '<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>', image: '<img class="fancybox-image" src="{href}" alt="" />', iframe: '<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"' + ($.browser.msie ? ' allowtransparency="true"' : "") + "></iframe>", swf: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>', error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>', closeBtn: '<div title="Close" class="fancybox-item fancybox-close"></div>', next: '<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>', prev: '<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>' }, openEffect: "fade", openSpeed: 250, openEasing: "swing", openOpacity: true, openMethod: "zoomIn", closeEffect: "fade", closeSpeed: 250, closeEasing: "swing", closeOpacity: true, closeMethod: "zoomOut", nextEffect: "elastic", nextSpeed: 300, nextEasing: "swing", nextMethod: "changeIn", prevEffect: "elastic", prevSpeed: 300, prevEasing: "swing", prevMethod: "changeOut", helpers: { overlay: { speedIn: 0, speedOut: 300, opacity: 0.8, css: { cursor: "pointer" }, closeClick: true }, title: { type: "float"} }, onCancel: $.noop, beforeLoad: $.noop, afterLoad: $.noop, beforeShow: $.noop, afterShow: $.noop, beforeClose: $.noop, afterClose: $.noop }, group: {}, opts: {}, coming: null, current: null, isOpen: false, isOpened: false, wrap: null, outer: null, inner: null, player: { timer: null, isActive: false }, ajaxLoad: null, imgPreload: null, transitions: {}, helpers: {}, open: function (group, opts) { F.close(true); if (group && !$.isArray(group)) { group = group instanceof $ ? $(group).get() : [group] } F.isActive = true; F.opts = $.extend(true, {}, F.defaults, opts); if ($.isPlainObject(opts) && typeof opts.keys !== "undefined") { F.opts.keys = opts.keys ? $.extend({}, F.defaults.keys, opts.keys) : false } F.group = group; F._start(F.opts.index || 0) }, cancel: function () { if (F.coming && false === F.trigger("onCancel")) { return } F.coming = null; F.hideLoading(); if (F.ajaxLoad) { F.ajaxLoad.abort() } F.ajaxLoad = null; if (F.imgPreload) { F.imgPreload.onload = F.imgPreload.onabort = F.imgPreload.onerror = null } }, close: function (a) { F.cancel(); if (!F.current || false === F.trigger("beforeClose")) { return } F.unbindEvents(); if (!F.isOpen || (a && a[0] === true)) { $(".fancybox-wrap").stop().trigger("onReset").remove(); F._afterZoomOut() } else { F.isOpen = F.isOpened = false; $(".fancybox-item, .fancybox-nav").remove(); F.wrap.stop(true).removeClass("fancybox-opened"); F.inner.css("overflow", "hidden"); F.transitions[F.current.closeMethod]() } }, play: function (a) { var clear = function () { clearTimeout(F.player.timer) }, set = function () { clear(); if (F.current && F.player.isActive) { F.player.timer = setTimeout(F.next, F.current.playSpeed) } }, stop = function () { clear(); $("body").unbind(".player"); F.player.isActive = false; F.trigger("onPlayEnd") }, start = function () { if (F.current && (F.current.loop || F.current.index < F.group.length - 1)) { F.player.isActive = true; $("body").bind({ "afterShow.player onUpdate.player": set, "onCancel.player beforeClose.player": stop, "beforeLoad.player": clear }); set(); F.trigger("onPlayStart") } }; if (F.player.isActive || (a && a[0] === false)) { stop() } else { start() } }, next: function () { if (F.current) { F.jumpto(F.current.index + 1) } }, prev: function () { if (F.current) { F.jumpto(F.current.index - 1) } }, jumpto: function (index) { if (!F.current) { return } index = parseInt(index, 10); if (F.group.length > 1 && F.current.loop) { if (index >= F.group.length) { index = 0 } else { if (index < 0) { index = F.group.length - 1 } } } if (typeof F.group[index] !== "undefined") { F.cancel(); F._start(index) } }, reposition: function (a) { if (F.isOpen) { F.wrap.css(F._getPosition(a)) } }, update: function (e) { if (F.isOpen) { if (!didResize) { resizeTimer = setTimeout(function () { var current = F.current; if (didResize) { didResize = false; if (current) { if (current.autoResize || (e && e.type === "orientationchange")) { if (current.autoSize) { F.inner.height("auto"); current.height = F.inner.height() } F._setDimension(); if (current.canGrow) { F.inner.height("auto") } } if (current.autoCenter) { F.reposition() } F.trigger("onUpdate") } } }, 100) } didResize = true } }, toggle: function () { if (F.isOpen) { F.current.fitToView = !F.current.fitToView; F.update() } }, hideLoading: function () { $("#fancybox-loading").remove() }, showLoading: function () { F.hideLoading(); $('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo("body") }, getViewport: function () { return { x: W.scrollLeft(), y: W.scrollTop(), w: W.width(), h: W.height()} }, unbindEvents: function () { if (F.wrap) { F.wrap.unbind(".fb") } D.unbind(".fb"); W.unbind(".fb") }, bindEvents: function () { var current = F.current, keys = current.keys; if (!current) { return } W.bind("resize.fb, orientationchange.fb", F.update); if (keys) { D.bind("keydown.fb", function (e) { var code; if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey && $.inArray(e.target.tagName.toLowerCase(), ["input", "textarea", "select", "button"]) < 0) { code = e.keyCode; if ($.inArray(code, keys.close) > -1) { F.close(); e.preventDefault() } else { if ($.inArray(code, keys.next) > -1) { F.next(); e.preventDefault() } else { if ($.inArray(code, keys.prev) > -1) { F.prev(); e.preventDefault() } } } } }) } if ($.fn.mousewheel && current.mouseWheel && F.group.length > 1) { F.wrap.bind("mousewheel.fb", function (e, delta) { var target = $(e.target).get(0); if (target.clientHeight === 0 || (target.scrollHeight === target.clientHeight && target.scrollWidth === target.clientWidth)) { e.preventDefault(); F[delta > 0 ? "prev" : "next"]() } }) } }, trigger: function (event) { var ret, obj = F[$.inArray(event, ["onCancel", "beforeLoad", "afterLoad"]) > -1 ? "coming" : "current"]; if (!obj) { return } if ($.isFunction(obj[event])) { ret = obj[event].apply(obj, Array.prototype.slice.call(arguments, 1)) } if (ret === false) { return false } if (obj.helpers) { $.each(obj.helpers, function (helper, opts) { if (opts && typeof F.helpers[helper] !== "undefined" && $.isFunction(F.helpers[helper][event])) { F.helpers[helper][event](opts, obj) } }) } $.event.trigger(event + ".fb") }, isImage: function (str) { return str && str.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i) }, isSWF: function (str) { return str && str.match(/\.(swf)(.*)?$/i) }, _start: function (index) { var coming = {}, element = F.group[index] || null, isDom, href, type, rez; if (element && (element.nodeType || element instanceof $)) { isDom = true; if ($.metadata) { coming = $(element).metadata() } } coming = $.extend(true, {}, F.opts, { index: index, element: element }, ($.isPlainObject(element) ? element : coming)); $.each(["href", "title", "content", "type"], function (i, v) { coming[v] = F.opts[v] || (isDom && $(element).attr(v)) || coming[v] || null }); if (typeof coming.margin === "number") { coming.margin = [coming.margin, coming.margin, coming.margin, coming.margin] } if (coming.modal) { $.extend(true, coming, { closeBtn: false, closeClick: false, nextClick: false, arrows: false, mouseWheel: false, keys: null, helpers: { overlay: { css: { cursor: "auto" }, closeClick: false}} }) } F.coming = coming; if (false === F.trigger("beforeLoad")) { F.coming = null; return } type = coming.type; href = coming.href || element; if (!type) { if (isDom) { rez = $(element).data("fancybox-type"); if (!rez && element.className) { rez = element.className.match(/fancybox\.(\w+)/); type = rez ? rez[1] : null } } if (!type && $.type(href) === "string") { if (F.isImage(href)) { type = "image" } else { if (F.isSWF(href)) { type = "swf" } else { if (href.match(/^#/)) { type = "inline" } } } } if (!type) { type = isDom ? "inline" : "html" } coming.type = type } if (type === "inline" || type === "html") { if (!coming.content) { if (type === "inline") { coming.content = $($.type(href) === "string" ? href.replace(/.*(?=#[^\s]+$)/, "") : href) } else { coming.content = element } } if (!coming.content || !coming.content.length) { type = null } } else { if (!href) { type = null } } coming.group = F.group; coming.isDom = isDom; coming.href = href; if (type === "image") { F._loadImage() } else { if (type === "ajax") { F._loadAjax() } else { if (type) { F._afterLoad() } else { F._error("type") } } } }, _error: function (type) { F.hideLoading(); $.extend(F.coming, { type: "html", autoSize: true, minHeight: 0, hasError: type, content: F.coming.tpl.error }); F._afterLoad() }, _loadImage: function () { F.imgPreload = new Image(); F.imgPreload.onload = function () { this.onload = this.onerror = null; F.coming.width = this.width; F.coming.height = this.height; F._afterLoad() }; F.imgPreload.onerror = function () { this.onload = this.onerror = null; F._error("image") }; F.imgPreload.src = F.coming.href; if (!F.imgPreload.width) { F.showLoading() } }, _loadAjax: function () { F.showLoading(); F.ajaxLoad = $.ajax($.extend({}, F.coming.ajax, { url: F.coming.href, error: function (jqXHR, textStatus) { if (textStatus !== "abort") { F._error("ajax", jqXHR) } else { F.hideLoading() } }, success: function (data, textStatus) { if (textStatus === "success") { F.coming.content = data; F._afterLoad() } } })) }, _preloadImages: function () { var group = F.group, current = F.current, len = group.length, item, href; if (!current.preload || group.length < 2) { return } for (var i = 1; i <= Math.min(current.preload, len - 1); i++) { item = group[(current.index + i) % len]; href = $(item).attr("href") || item; if (href) { new Image().src = href } } }, _afterLoad: function () { F.hideLoading(); if (!F.coming || false === F.trigger("afterLoad", F.current)) { F.coming = false; return } if (F.isOpened) { $(".fancybox-item").remove(); F.wrap.stop(true).removeClass("fancybox-opened"); F.inner.css("overflow", "hidden"); F.transitions[F.current.prevMethod]() } else { $(".fancybox-wrap").stop().trigger("onReset").remove(); F.trigger("afterClose") } F.unbindEvents(); F.isOpen = false; F.current = F.coming; F.wrap = $(F.current.tpl.wrap).addClass("fancybox-" + (isMobile ? "mobile" : "desktop") + " fancybox-tmp " + F.current.wrapCSS).appendTo("body"); F.outer = $(".fancybox-outer", F.wrap).css("padding", F.current.padding + "px"); F.inner = $(".fancybox-inner", F.wrap); F._setContent() }, _setContent: function () { var content, loadingBay, iframe, current = F.current, type = current.type; switch (type) { case "inline": case "ajax": case "html": content = current.content; if (content instanceof $) { content = content.show().detach(); if (content.parent().hasClass("fancybox-inner")) { content.parents(".fancybox-wrap").trigger("onReset").remove() } $(F.wrap).bind("onReset", function () { content.appendTo("body").hide() }) } if (current.autoSize) { loadingBay = $('<div class="fancybox-tmp ' + F.current.wrapCSS + '"></div>').appendTo("body").append(content); current.width = loadingBay.width(); current.height = loadingBay.height(); loadingBay.width(F.current.width); if (loadingBay.height() > current.height) { loadingBay.width(current.width + 1); current.width = loadingBay.width(); current.height = loadingBay.height() } content = loadingBay.contents().detach(); loadingBay.remove() } break; case "image": content = current.tpl.image.replace("{href}", current.href); current.aspectRatio = true; break; case "swf": content = current.tpl.swf.replace(/\{width\}/g, current.width).replace(/\{height\}/g, current.height).replace(/\{href\}/g, current.href); break } if (type === "iframe") { content = $(current.tpl.iframe.replace("{rnd}", new Date().getTime())).attr("scrolling", current.scrolling); current.scrolling = "auto"; if (current.autoSize) { content.width(current.width); F.showLoading(); content.data("ready", false).appendTo(F.inner).bind({ onCancel: function () { $(this).unbind(); F._afterZoomOut() }, load: function () { var iframe = $(this), height; try { if (this.contentWindow.document.location) { height = iframe.contents().find("body").height() + 12; iframe.height(height) } } catch (e) { current.autoSize = false } if (iframe.data("ready") === false) { F.hideLoading(); if (height) { F.current.height = height } F._beforeShow(); iframe.data("ready", true) } else { if (height) { F.update() } } } }).attr("src", current.href); return } else { content.attr("src", current.href) } } else { if (type === "image" || type === "swf") { current.autoSize = false; current.scrolling = "visible" } } F.inner.append(content); F._beforeShow() }, _beforeShow: function () { F.coming = null; F.trigger("beforeShow"); F._setDimension(); F.wrap.hide().removeClass("fancybox-tmp"); F.bindEvents(); F._preloadImages(); F.transitions[F.isOpened ? F.current.nextMethod : F.current.openMethod]() }, _setDimension: function () { var wrap = F.wrap, outer = F.outer, inner = F.inner, current = F.current, viewport = F.getViewport(), margin = current.margin, padding2 = current.padding * 2, width = current.width, height = current.height, maxWidth = current.maxWidth, maxHeight = current.maxHeight, minWidth = current.minWidth, minHeight = current.minHeight, ratio, height_, space; viewport.w -= (margin[1] + margin[3]); viewport.h -= (margin[0] + margin[2]); if (width.toString().indexOf("%") > -1) { width = (((viewport.w - padding2) * parseFloat(width)) / 100) } if (height.toString().indexOf("%") > -1) { height = (((viewport.h - padding2) * parseFloat(height)) / 100) } ratio = width / height; width += padding2; height += padding2; if (current.fitToView) { maxWidth = Math.min(viewport.w, maxWidth); maxHeight = Math.min(viewport.h, maxHeight) } if (current.aspectRatio) { if (width > maxWidth) { width = maxWidth; height = ((width - padding2) / ratio) + padding2 } if (height > maxHeight) { height = maxHeight; width = ((height - padding2) * ratio) + padding2 } if (width < minWidth) { width = minWidth; height = ((width - padding2) / ratio) + padding2 } if (height < minHeight) { height = minHeight; width = ((height - padding2) * ratio) + padding2 } } else { width = Math.max(minWidth, Math.min(width, maxWidth)); height = Math.max(minHeight, Math.min(height, maxHeight)) } width = Math.round(width); height = Math.round(height); $(wrap.add(outer).add(inner)).width("auto").height("auto"); inner.width(width - padding2).height(height - padding2); wrap.width(width); height_ = wrap.height(); if (width > maxWidth || height_ > maxHeight) { while ((width > maxWidth || height_ > maxHeight) && width > minWidth && height_ > minHeight) { height = height - 10; if (current.aspectRatio) { width = Math.round(((height - padding2) * ratio) + padding2); if (width < minWidth) { width = minWidth; height = ((width - padding2) / ratio) + padding2 } } else { width = width - 10 } inner.width(width - padding2).height(height - padding2); wrap.width(width); height_ = wrap.height() } } current.dim = { width: width, height: height_ }; current.canGrow = current.autoSize && height > minHeight && height < maxHeight; current.canShrink = false; current.canExpand = false; if ((width - padding2) < current.width || (height - padding2) < current.height) { current.canExpand = true } else { if ((width > viewport.w || height_ > viewport.h) && width > minWidth && height > minHeight) { current.canShrink = true } } space = height_ - padding2; F.innerSpace = space - inner.height(); F.outerSpace = space - outer.height() }, _getPosition: function (a) { var current = F.current, viewport = F.getViewport(), margin = current.margin, width = F.wrap.width() + margin[1] + margin[3], height = F.wrap.height() + margin[0] + margin[2], rez = { position: "absolute", top: margin[0] + viewport.y, left: margin[3] + viewport.x }; if (current.fixed && (!a || a[0] === false) && height <= viewport.h && width <= viewport.w) { rez = { position: "fixed", top: margin[0], left: margin[3]} } rez.top = Math.ceil(Math.max(rez.top, rez.top + ((viewport.h - height) * current.topRatio))) + "px"; rez.left = Math.ceil(Math.max(rez.left, rez.left + ((viewport.w - width) * 0.5))) + "px"; return rez }, _afterZoomIn: function () { var current = F.current, scrolling = current.scrolling; F.isOpen = F.isOpened = true; F.wrap.addClass("fancybox-opened").css("overflow", "visible"); F.update(); F.inner.css("overflow", scrolling === "yes" ? "scroll" : (scrolling === "no" ? "hidden" : scrolling)); if (current.closeClick || current.nextClick) { F.inner.css("cursor", "pointer").bind("click.fb", current.nextClick ? F.next : F.close) } if (current.closeBtn) { $(current.tpl.closeBtn).appendTo(F.outer).bind("click.fb", F.close) } if (current.arrows && F.group.length > 1) { if (current.loop || current.index > 0) { $(current.tpl.prev).appendTo(F.inner).bind("click.fb", F.prev) } if (current.loop || current.index < F.group.length - 1) { $(current.tpl.next).appendTo(F.inner).bind("click.fb", F.next) } } F.trigger("afterShow"); if (F.opts.autoPlay && !F.player.isActive) { F.opts.autoPlay = false; F.play() } }, _afterZoomOut: function () { F.trigger("afterClose"); F.wrap.trigger("onReset").remove(); $.extend(F, { group: {}, opts: {}, current: null, isActive: false, isOpened: false, isOpen: false, wrap: null, outer: null, inner: null }) } }); F.transitions = { getOrigPosition: function () { var current = F.current, element = current.element, padding = current.padding, orig = $(current.orig), pos = {}, width = 50, height = 50, viewport; if (!orig.length && current.isDom && $(element).is(":visible")) { orig = $(element).find("img:first"); if (!orig.length) { orig = $(element) } } if (orig.length) { pos = orig.offset(); if (orig.is("img")) { width = orig.outerWidth(); height = orig.outerHeight() } } else { viewport = F.getViewport(); pos.top = viewport.y + (viewport.h - height) * 0.5; pos.left = viewport.x + (viewport.w - width) * 0.5 } pos = { top: Math.ceil(pos.top - padding) + "px", left: Math.ceil(pos.left - padding) + "px", width: Math.ceil(width + padding * 2) + "px", height: Math.ceil(height + padding * 2) + "px" }; return pos }, step: function (now, fx) { var ratio, innerValue, outerValue; if (fx.prop === "width" || fx.prop === "height") { innerValue = outerValue = Math.ceil(now - (F.current.padding * 2)); if (fx.prop === "height") { ratio = (now - fx.start) / (fx.end - fx.start); if (fx.start > fx.end) { ratio = 1 - ratio } innerValue -= F.innerSpace * ratio; outerValue -= F.outerSpace * ratio } F.inner[fx.prop](innerValue); F.outer[fx.prop](outerValue) } }, zoomIn: function () { var wrap = F.wrap, current = F.current, startPos, endPos, dim = current.dim; if (current.openEffect === "elastic") { endPos = $.extend({}, dim, F._getPosition(true)); delete endPos.position; startPos = this.getOrigPosition(); if (current.openOpacity) { startPos.opacity = 0; endPos.opacity = 1 } F.outer.add(F.inner).width("auto").height("auto"); wrap.css(startPos).show(); wrap.animate(endPos, { duration: current.openSpeed, easing: current.openEasing, step: this.step, complete: F._afterZoomIn }) } else { wrap.css($.extend({}, dim, F._getPosition())); if (current.openEffect === "fade") { wrap.fadeIn(current.openSpeed, F._afterZoomIn) } else { wrap.show(); F._afterZoomIn() } } }, zoomOut: function () { var wrap = F.wrap, current = F.current, endPos; if (current.closeEffect === "elastic") { if (wrap.css("position") === "fixed") { wrap.css(F._getPosition(true)) } endPos = this.getOrigPosition(); if (current.closeOpacity) { endPos.opacity = 0 } wrap.animate(endPos, { duration: current.closeSpeed, easing: current.closeEasing, step: this.step, complete: F._afterZoomOut }) } else { wrap.fadeOut(current.closeEffect === "fade" ? current.closeSpeed : 0, F._afterZoomOut) } }, changeIn: function () { var wrap = F.wrap, current = F.current, startPos; if (current.nextEffect === "elastic") { startPos = F._getPosition(true); startPos.opacity = 0; startPos.top = (parseInt(startPos.top, 10) - 200) + "px"; wrap.css(startPos).show().animate({ opacity: 1, top: "+=200px" }, { duration: current.nextSpeed, easing: current.nextEasing, complete: F._afterZoomIn }) } else { wrap.css(F._getPosition()); if (current.nextEffect === "fade") { wrap.hide().fadeIn(current.nextSpeed, F._afterZoomIn) } else { wrap.show(); F._afterZoomIn() } } }, changeOut: function () { var wrap = F.wrap, current = F.current, cleanUp = function () { $(this).trigger("onReset").remove() }; wrap.removeClass("fancybox-opened"); if (current.prevEffect === "elastic") { wrap.animate({ opacity: 0, top: "+=200px" }, { duration: current.prevSpeed, easing: current.prevEasing, complete: cleanUp }) } else { wrap.fadeOut(current.prevEffect === "fade" ? current.prevSpeed : 0, cleanUp) } } }; F.helpers.overlay = { overlay: null, update: function () { var width, scrollWidth, offsetWidth; this.overlay.width(0).height(0); if ($.browser.msie) { scrollWidth = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth); offsetWidth = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth); width = scrollWidth < offsetWidth ? W.width() : scrollWidth } else { width = D.width() } this.overlay.width(width).height(D.height()) }, beforeShow: function (opts) { if (this.overlay) { return } opts = $.extend(true, { speedIn: "fast", closeClick: true, opacity: 1, css: { background: "black"} }, opts); this.overlay = $('<div id="fancybox-overlay"></div>').css(opts.css).appendTo("body"); this.update(); if (opts.closeClick) { this.overlay.bind("click.fb", F.close) } W.bind("resize.fb", $.proxy(this.update, this)); this.overlay.fadeTo(opts.speedIn, opts.opacity) }, onUpdate: function () { this.update() }, afterClose: function (opts) { if (this.overlay) { this.overlay.fadeOut(opts.speedOut || 0, function () { $(this).remove() }) } this.overlay = null } }; F.helpers.title = { beforeShow: function (opts) { var title, text = F.current.title; if (text) { title = $('<div class="fancybox-title fancybox-title-' + opts.type + '-wrap">' + text + "</div>").appendTo("body"); if (opts.type === "float") { title.width(title.width()); title.wrapInner('<span class="child"></span>'); F.current.margin[2] += Math.abs(parseInt(title.css("margin-bottom"), 10)) } title.appendTo(opts.type === "over" ? F.inner : (opts.type === "outside" ? F.wrap : F.outer)) } } }; $.fn.fancybox = function (options) { var that = $(this), selector = this.selector || "", index, run = function (e) { var what = this, relType = "rel", relVal = what[relType], idx = index; if (!(e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) { e.preventDefault(); if (!relVal) { relType = "data-fancybox-group"; relVal = $(what).attr("data-fancybox-group") } if (relVal && relVal !== "" && relVal !== "nofollow") { what = selector.length ? $(selector) : that; what = what.filter("[" + relType + '="' + relVal + '"]'); idx = what.index(this) } options.index = idx; F.open(what, options) } }; options = options || {}; index = options.index || 0; if (selector) { D.undelegate(selector, "click.fb-start").delegate(selector, "click.fb-start", run) } else { that.unbind("click.fb-start").bind("click.fb-start", run) } return this } } (window, document, jQuery)); (function (a, b, c) { var d = a.document, e = a.Modernizr, f = function (a) { return a.charAt(0).toUpperCase() + a.slice(1) }, g = "Moz Webkit O Ms".split(" "), h = function (a) { var b = d.documentElement.style, c; if (typeof b[a] == "string") { return a } a = f(a); for (var e = 0, h = g.length; e < h; e++) { c = g[e] + a; if (typeof b[c] == "string") { return c } } }, i = h("transform"), j = h("transitionProperty"), k = { csstransforms: function () { return !!i }, csstransforms3d: function () { var a = !!h("perspective"); if (a) { var c = " -o- -moz- -ms- -webkit- -khtml- ".split(" "), d = "@media (" + c.join("transform-3d),(") + "modernizr)", e = b("<style>" + d + "{#modernizr{height:3px}}</style>").appendTo("head"), f = b('<div id="modernizr" />').appendTo("html"); a = f.height() === 3, f.remove(), e.remove() } return a }, csstransitions: function () { return !!j } }, l; if (e) { for (l in k) { e.hasOwnProperty(l) || e.addTest(l, k[l]) } } else { e = a.Modernizr = { _version: "1.6ish: miniModernizr for Isotope" }; var m = " ", n; for (l in k) { n = k[l](), e[l] = n, m += " " + (n ? "" : "no-") + l } b("html").addClass(m) } if (e.csstransforms) { var o = e.csstransforms3d ? { translate: function (a) { return "translate3d(" + a[0] + "px, " + a[1] + "px, 0) " }, scale: function (a) { return "scale3d(" + a + ", " + a + ", 1) " } } : { translate: function (a) { return "translate(" + a[0] + "px, " + a[1] + "px) " }, scale: function (a) { return "scale(" + a + ") " } }, p = function (a, c, d) { var e = b.data(a, "isoTransform") || {}, f = {}, g, h = {}, j; f[c] = d, b.extend(e, f); for (g in e) { j = e[g], h[g] = o[g](j) } var k = h.translate || "", l = h.scale || "", m = k + l; b.data(a, "isoTransform", e), a.style[i] = m }; b.cssNumber.scale = !0, b.cssHooks.scale = { set: function (a, b) { p(a, "scale", b) }, get: function (a, c) { var d = b.data(a, "isoTransform"); return d && d.scale ? d.scale : 1 } }, b.fx.step.scale = function (a) { b.cssHooks.scale.set(a.elem, a.now + a.unit) }, b.cssNumber.translate = !0, b.cssHooks.translate = { set: function (a, b) { p(a, "translate", b) }, get: function (a, c) { var d = b.data(a, "isoTransform"); return d && d.translate ? d.translate : [0, 0] } } } var q, r; e.csstransitions && (q = { WebkitTransitionProperty: "webkitTransitionEnd", MozTransitionProperty: "transitionend", OTransitionProperty: "oTransitionEnd", transitionProperty: "transitionEnd"}[j], r = h("transitionDuration")); var s = b.event, t; s.special.smartresize = { setup: function () { b(this).bind("resize", s.special.smartresize.handler) }, teardown: function () { b(this).unbind("resize", s.special.smartresize.handler) }, handler: function (a, b) { var c = this, d = arguments; a.type = "smartresize", t && clearTimeout(t), t = setTimeout(function () { jQuery.event.handle.apply(c, d) }, b === "execAsap" ? 0 : 100) } }, b.fn.smartresize = function (a) { return a ? this.bind("smartresize", a) : this.trigger("smartresize", ["execAsap"]) }, b.Isotope = function (a, c, d) { this.element = b(c), this._create(a), this._init(d) }; var u = ["width", "height"], v = b(a); b.Isotope.settings = { resizable: !0, layoutMode: "masonry", containerClass: "isotope", itemClass: "isotope-item", hiddenClass: "isotope-hidden", hiddenStyle: { opacity: 0, scale: 0.001 }, visibleStyle: { opacity: 1, scale: 1 }, containerStyle: { position: "relative", overflow: "hidden" }, animationEngine: "best-available", animationOptions: { queue: !1, duration: 800 }, sortBy: "original-order", sortAscending: !0, resizesContainer: !0, transformsEnabled: !b.browser.opera, itemPositionDataEnabled: !1 }, b.Isotope.prototype = { _create: function (a) { this.options = b.extend({}, b.Isotope.settings, a), this.styleQueue = [], this.elemCount = 0; var c = this.element[0].style; this.originalStyle = {}; var d = u.slice(0); for (var e in this.options.containerStyle) { d.push(e) } for (var f = 0, g = d.length; f < g; f++) { e = d[f], this.originalStyle[e] = c[e] || "" } this.element.css(this.options.containerStyle), this._updateAnimationEngine(), this._updateUsingTransforms(); var h = { "original-order": function (a, b) { b.elemCount++; return b.elemCount }, random: function () { return Math.random() } }; this.options.getSortData = b.extend(this.options.getSortData, h), this.reloadItems(), this.offset = { left: parseInt(this.element.css("padding-left") || 0, 10), top: parseInt(this.element.css("padding-top") || 0, 10) }; var i = this; setTimeout(function () { i.element.addClass(i.options.containerClass) }, 0), this.options.resizable && v.bind("smartresize.isotope", function () { i.resize() }), this.element.delegate("." + this.options.hiddenClass, "click", function () { return !1 }) }, _getAtoms: function (a) { var b = this.options.itemSelector, c = b ? a.filter(b).add(a.find(b)) : a, d = { position: "absolute" }; this.usingTransforms && (d.left = 0, d.top = 0), c.css(d).addClass(this.options.itemClass), this.updateSortData(c, !0); return c }, _init: function (a) { this.$filteredAtoms = this._filter(this.$allAtoms), this._sort(), this.reLayout(a) }, option: function (a) { if (b.isPlainObject(a)) { this.options = b.extend(!0, this.options, a); var c; for (var d in a) { c = "_update" + f(d), this[c] && this[c]() } } }, _updateAnimationEngine: function () { var a = this.options.animationEngine.toLowerCase().replace(/[ _\-]/g, ""), b; switch (a) { case "css": case "none": b = !1; break; case "jquery": b = !0; break; default: b = !e.csstransitions } this.isUsingJQueryAnimation = b, this._updateUsingTransforms() }, _updateTransformsEnabled: function () { this._updateUsingTransforms() }, _updateUsingTransforms: function () { var a = this.usingTransforms = this.options.transformsEnabled && e.csstransforms && e.csstransitions && !this.isUsingJQueryAnimation; a || (delete this.options.hiddenStyle.scale, delete this.options.visibleStyle.scale), this.getPositionStyles = a ? this._translate : this._positionAbs }, _filter: function (a) { var b = this.options.filter === "" ? "*" : this.options.filter; if (!b) { return a } var c = this.options.hiddenClass, d = "." + c, e = a.filter(d), f = e; if (b !== "*") { f = e.filter(b); var g = a.not(d).not(b).addClass(c); this.styleQueue.push({ $el: g, style: this.options.hiddenStyle }) } this.styleQueue.push({ $el: f, style: this.options.visibleStyle }), f.removeClass(c); return a.filter(b) }, updateSortData: function (a, c) { var d = this, e = this.options.getSortData, f, g; a.each(function () { f = b(this), g = {}; for (var a in e) { !c && a === "original-order" ? g[a] = b.data(this, "isotope-sort-data")[a] : g[a] = e[a](f, d) } b.data(this, "isotope-sort-data", g) }) }, _sort: function () { var a = this.options.sortBy, b = this._getSorter, c = this.options.sortAscending ? 1 : -1, d = function (d, e) { var f = b(d, a), g = b(e, a); f === g && a !== "original-order" && (f = b(d, "original-order"), g = b(e, "original-order")); return (f > g ? 1 : f < g ? -1 : 0) * c }; this.$filteredAtoms.sort(d) }, _getSorter: function (a, c) { return b.data(a, "isotope-sort-data")[c] }, _translate: function (a, b) { return { translate: [a, b]} }, _positionAbs: function (a, b) { return { left: a, top: b} }, _pushPosition: function (a, b, c) { b = Math.round(b + this.offset.left), c = Math.round(c + this.offset.top); var d = this.getPositionStyles(b, c); this.styleQueue.push({ $el: a, style: d }), this.options.itemPositionDataEnabled && a.data("isotope-item-position", { x: b, y: c }) }, layout: function (a, b) { var c = this.options.layoutMode; this["_" + c + "Layout"](a); if (this.options.resizesContainer) { var d = this["_" + c + "GetContainerSize"](); this.styleQueue.push({ $el: this.element, style: d }) } this._processStyleQueue(a, b), this.isLaidOut = !0 }, _processStyleQueue: function (a, c) { var d = this.isLaidOut ? this.isUsingJQueryAnimation ? "animate" : "css" : "css", f = this.options.animationOptions, g = this.options.onLayout, h, i, j, k; i = function (a, b) { b.$el[d](b.style, f) }; if (this._isInserting && this.isUsingJQueryAnimation) { i = function (a, b) { h = b.$el.hasClass("no-transition") ? "css" : d, b.$el[h](b.style, f) } } else { if (c || g || f.complete) { var l = !1, m = [c, g, f.complete], n = this; j = !0, k = function () { if (!l) { var b; for (var c = 0, d = m.length; c < d; c++) { b = m[c], typeof b == "function" && b.call(n.element, a, n) } l = !0 } }; if (this.isUsingJQueryAnimation && d === "animate") { f.complete = k, j = !1 } else { if (e.csstransitions) { var o = 0, p = this.styleQueue[0], s = p && p.$el, t; while (!s || !s.length) { t = this.styleQueue[o++]; if (!t) { return } s = t.$el } var u = parseFloat(getComputedStyle(s[0])[r]); u > 0 && (i = function (a, b) { b.$el[d](b.style, f).one(q, k) }, j = !1) } } } } b.each(this.styleQueue, i), j && k(), this.styleQueue = [] }, resize: function () { this["_" + this.options.layoutMode + "ResizeChanged"]() && this.reLayout() }, reLayout: function (a) { this["_" + this.options.layoutMode + "Reset"](), this.layout(this.$filteredAtoms, a) }, addItems: function (a, b) { var c = this._getAtoms(a); this.$allAtoms = this.$allAtoms.add(c), b && b(c) }, insert: function (a, b) { this.element.append(a); var c = this; this.addItems(a, function (a) { var d = c._filter(a); c._addHideAppended(d), c._sort(), c.reLayout(), c._revealAppended(d, b) }) }, appended: function (a, b) { var c = this; this.addItems(a, function (a) { c._addHideAppended(a), c.layout(a), c._revealAppended(a, b) }) }, _addHideAppended: function (a) { this.$filteredAtoms = this.$filteredAtoms.add(a), a.addClass("no-transition"), this._isInserting = !0, this.styleQueue.push({ $el: a, style: this.options.hiddenStyle }) }, _revealAppended: function (a, b) { var c = this; setTimeout(function () { a.removeClass("no-transition"), c.styleQueue.push({ $el: a, style: c.options.visibleStyle }), c._isInserting = !1, c._processStyleQueue(a, b) }, 10) }, reloadItems: function () { this.$allAtoms = this._getAtoms(this.element.children()) }, remove: function (a, b) { var c = this, d = function () { c.$allAtoms = c.$allAtoms.not(a), a.remove(), b && b.call(this.element) }; a.filter(":not(." + this.options.hiddenClass + ")").length ? (this.styleQueue.push({ $el: a, style: this.options.hiddenStyle }), this.$filteredAtoms = this.$filteredAtoms.not(a), this._sort(), this.reLayout(d)) : d() }, shuffle: function (a) { this.updateSortData(this.$allAtoms), this.options.sortBy = "random", this._sort(), this.reLayout(a) }, destroy: function () { var a = this.usingTransforms, b = this.options; this.$allAtoms.removeClass(b.hiddenClass + " " + b.itemClass).each(function () { var b = this.style; b.position = "", b.top = "", b.left = "", b.opacity = "", a && (b[i] = "") }); var c = this.element[0].style; for (var d in this.originalStyle) { c[d] = this.originalStyle[d] } this.element.unbind(".isotope").undelegate("." + b.hiddenClass, "click").removeClass(b.containerClass).removeData("isotope"), v.unbind(".isotope") }, _getSegments: function (a) { var b = this.options.layoutMode, c = a ? "rowHeight" : "columnWidth", d = a ? "height" : "width", e = a ? "rows" : "cols", g = this.element[d](), h, i = this.options[b] && this.options[b][c] || this.$filteredAtoms["outer" + f(d)](!0) || g; h = Math.floor(g / i), h = Math.max(h, 1), this[b][e] = h, this[b][c] = i }, _checkIfSegmentsChanged: function (a) { var b = this.options.layoutMode, c = a ? "rows" : "cols", d = this[b][c]; this._getSegments(a); return this[b][c] !== d }, _masonryReset: function () { this.masonry = {}, this._getSegments(); var a = this.masonry.cols; this.masonry.colYs = []; while (a--) { this.masonry.colYs.push(0) } }, _masonryLayout: function (a) { var c = this, d = c.masonry; a.each(function () { var a = b(this), e = Math.ceil(a.outerWidth(!0) / d.columnWidth); e = Math.min(e, d.cols); if (e === 1) { c._masonryPlaceBrick(a, d.colYs) } else { var f = d.cols + 1 - e, g = [], h, i; for (i = 0; i < f; i++) { h = d.colYs.slice(i, i + e), g[i] = Math.max.apply(Math, h) } c._masonryPlaceBrick(a, g) } }) }, _masonryPlaceBrick: function (a, b) { var c = Math.min.apply(Math, b), d = 0; for (var e = 0, f = b.length; e < f; e++) { if (b[e] === c) { d = e; break } } var g = this.masonry.columnWidth * d, h = c; this._pushPosition(a, g, h); var i = c + a.outerHeight(!0), j = this.masonry.cols + 1 - f; for (e = 0; e < j; e++) { this.masonry.colYs[d + e] = i } }, _masonryGetContainerSize: function () { var a = Math.max.apply(Math, this.masonry.colYs); return { height: a} }, _masonryResizeChanged: function () { return this._checkIfSegmentsChanged() }, _fitRowsReset: function () { this.fitRows = { x: 0, y: 0, height: 0} }, _fitRowsLayout: function (a) { var c = this, d = this.element.width(), e = this.fitRows; a.each(function () { var a = b(this), f = a.outerWidth(!0), g = a.outerHeight(!0); e.x !== 0 && f + e.x > d && (e.x = 0, e.y = e.height), c._pushPosition(a, e.x, e.y), e.height = Math.max(e.y + g, e.height), e.x += f }) }, _fitRowsGetContainerSize: function () { return { height: this.fitRows.height} }, _fitRowsResizeChanged: function () { return !0 }, _cellsByRowReset: function () { this.cellsByRow = { index: 0 }, this._getSegments(), this._getSegments(!0) }, _cellsByRowLayout: function (a) { var c = this, d = this.cellsByRow; a.each(function () { var a = b(this), e = d.index % d.cols, f = Math.floor(d.index / d.cols), g = (e + 0.5) * d.columnWidth - a.outerWidth(!0) / 2, h = (f + 0.5) * d.rowHeight - a.outerHeight(!0) / 2; c._pushPosition(a, g, h), d.index++ }) }, _cellsByRowGetContainerSize: function () { return { height: Math.ceil(this.$filteredAtoms.length / this.cellsByRow.cols) * this.cellsByRow.rowHeight + this.offset.top} }, _cellsByRowResizeChanged: function () { return this._checkIfSegmentsChanged() }, _straightDownReset: function () { this.straightDown = { y: 0} }, _straightDownLayout: function (a) { var c = this; a.each(function (a) { var d = b(this); c._pushPosition(d, 0, c.straightDown.y), c.straightDown.y += d.outerHeight(!0) }) }, _straightDownGetContainerSize: function () { return { height: this.straightDown.y} }, _straightDownResizeChanged: function () { return !0 }, _masonryHorizontalReset: function () { this.masonryHorizontal = {}, this._getSegments(!0); var a = this.masonryHorizontal.rows; this.masonryHorizontal.rowXs = []; while (a--) { this.masonryHorizontal.rowXs.push(0) } }, _masonryHorizontalLayout: function (a) { var c = this, d = c.masonryHorizontal; a.each(function () { var a = b(this), e = Math.ceil(a.outerHeight(!0) / d.rowHeight); e = Math.min(e, d.rows); if (e === 1) { c._masonryHorizontalPlaceBrick(a, d.rowXs) } else { var f = d.rows + 1 - e, g = [], h, i; for (i = 0; i < f; i++) { h = d.rowXs.slice(i, i + e), g[i] = Math.max.apply(Math, h) } c._masonryHorizontalPlaceBrick(a, g) } }) }, _masonryHorizontalPlaceBrick: function (a, b) { var c = Math.min.apply(Math, b), d = 0; for (var e = 0, f = b.length; e < f; e++) { if (b[e] === c) { d = e; break } } var g = c, h = this.masonryHorizontal.rowHeight * d; this._pushPosition(a, g, h); var i = c + a.outerWidth(!0), j = this.masonryHorizontal.rows + 1 - f; for (e = 0; e < j; e++) { this.masonryHorizontal.rowXs[d + e] = i } }, _masonryHorizontalGetContainerSize: function () { var a = Math.max.apply(Math, this.masonryHorizontal.rowXs); return { width: a} }, _masonryHorizontalResizeChanged: function () { return this._checkIfSegmentsChanged(!0) }, _fitColumnsReset: function () { this.fitColumns = { x: 0, y: 0, width: 0} }, _fitColumnsLayout: function (a) { var c = this, d = this.element.height(), e = this.fitColumns; a.each(function () { var a = b(this), f = a.outerWidth(!0), g = a.outerHeight(!0); e.y !== 0 && g + e.y > d && (e.x = e.width, e.y = 0), c._pushPosition(a, e.x, e.y), e.width = Math.max(e.x + f, e.width), e.y += g }) }, _fitColumnsGetContainerSize: function () { return { width: this.fitColumns.width} }, _fitColumnsResizeChanged: function () { return !0 }, _cellsByColumnReset: function () { this.cellsByColumn = { index: 0 }, this._getSegments(), this._getSegments(!0) }, _cellsByColumnLayout: function (a) { var c = this, d = this.cellsByColumn; a.each(function () { var a = b(this), e = Math.floor(d.index / d.rows), f = d.index % d.rows, g = (e + 0.5) * d.columnWidth - a.outerWidth(!0) / 2, h = (f + 0.5) * d.rowHeight - a.outerHeight(!0) / 2; c._pushPosition(a, g, h), d.index++ }) }, _cellsByColumnGetContainerSize: function () { return { width: Math.ceil(this.$filteredAtoms.length / this.cellsByColumn.rows) * this.cellsByColumn.columnWidth} }, _cellsByColumnResizeChanged: function () { return this._checkIfSegmentsChanged(!0) }, _straightAcrossReset: function () { this.straightAcross = { x: 0} }, _straightAcrossLayout: function (a) { var c = this; a.each(function (a) { var d = b(this); c._pushPosition(d, c.straightAcross.x, 0), c.straightAcross.x += d.outerWidth(!0) }) }, _straightAcrossGetContainerSize: function () { return { width: this.straightAcross.x} }, _straightAcrossResizeChanged: function () { return !0 } }, b.fn.imagesLoaded = function (a) { function i(a) { var c = a.target; c.src !== f && b.inArray(c, g) === -1 && (g.push(c), --e <= 0 && (setTimeout(h), d.unbind(".imagesLoaded", i))) } function h() { a.call(c, d) } var c = this, d = c.find("img").add(c.filter("img")), e = d.length, f = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==", g = []; e || h(), d.bind("load.imagesLoaded error.imagesLoaded", i).each(function () { var a = this.src; this.src = f, this.src = a }); return c }; var w = function (b) { a.console && a.console.error(b) }; b.fn.isotope = function (a, c) { if (typeof a == "string") { var d = Array.prototype.slice.call(arguments, 1); this.each(function () { var c = b.data(this, "isotope"); if (!c) { w("cannot call methods on isotope prior to initialization; attempted to call method '" + a + "'") } else { if (!b.isFunction(c[a]) || a.charAt(0) === "_") { w("no such method '" + a + "' for isotope instance"); return } c[a].apply(c, d) } }) } else { this.each(function () { var d = b.data(this, "isotope"); d ? (d.option(a), d._init(c)) : b.data(this, "isotope", new b.Isotope(a, this, c)) }) } return this } })(window, jQuery); !function ($) { var Tooltip = function (element, options) { this.init("tooltip", element, options) }; Tooltip.prototype = { constructor: Tooltip, init: function (type, element, options) { var eventIn, eventOut; this.type = type; this.$element = $(element); this.options = this.getOptions(options); this.enabled = true; if (this.options.trigger != "manual") { eventIn = this.options.trigger == "hover" ? "mouseenter" : "focus"; eventOut = this.options.trigger == "hover" ? "mouseleave" : "blur"; this.$element.on(eventIn, this.options.selector, $.proxy(this.enter, this)); this.$element.on(eventOut, this.options.selector, $.proxy(this.leave, this)) } this.options.selector ? (this._options = $.extend({}, this.options, { trigger: "manual", selector: "" })) : this.fixTitle() }, getOptions: function (options) { options = $.extend({}, $.fn[this.type].defaults, options, this.$element.data()); if (options.delay && typeof options.delay == "number") { options.delay = { show: options.delay, hide: options.delay} } return options }, enter: function (e) { var self = $(e.currentTarget)[this.type](this._options).data(this.type); if (!self.options.delay || !self.options.delay.show) { return self.show() } clearTimeout(this.timeout); self.hoverState = "in"; this.timeout = setTimeout(function () { if (self.hoverState == "in") { self.show() } }, self.options.delay.show) }, leave: function (e) { var self = $(e.currentTarget)[this.type](this._options).data(this.type); if (!self.options.delay || !self.options.delay.hide) { return self.hide() } clearTimeout(this.timeout); self.hoverState = "out"; this.timeout = setTimeout(function () { if (self.hoverState == "out") { self.hide() } }, self.options.delay.hide) }, show: function () { var $tip, inside, pos, actualWidth, actualHeight, placement, tp; if (this.hasContent() && this.enabled) { $tip = this.tip(); this.setContent(); if (this.options.animation) { $tip.addClass("fade") } placement = typeof this.options.placement == "function" ? this.options.placement.call(this, $tip[0], this.$element[0]) : this.options.placement; inside = /in/.test(placement); $tip.remove().css({ top: 0, left: 0, display: "block" }).appendTo(inside ? this.$element : document.body); pos = this.getPosition(inside); actualWidth = $tip[0].offsetWidth; actualHeight = $tip[0].offsetHeight; switch (inside ? placement.split(" ")[1] : placement) { case "bottom": tp = { top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2 }; break; case "top": tp = { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 }; break; case "left": tp = { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth }; break; case "right": tp = { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }; break } $tip.css(tp).addClass(placement).addClass("in") } }, isHTML: function (text) { return typeof text != "string" || (text.charAt(0) === "<" && text.charAt(text.length - 1) === ">" && text.length >= 3) || /^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(text) }, setContent: function () { var $tip = this.tip(), title = this.getTitle(); $tip.find(".tooltip-inner")[this.isHTML(title) ? "html" : "text"](title); $tip.removeClass("fade in top bottom left right") }, hide: function () { var that = this, $tip = this.tip(); $tip.removeClass("in"); function removeWithAnimation() { var timeout = setTimeout(function () { $tip.off($.support.transition.end).remove() }, 500); $tip.one($.support.transition.end, function () { clearTimeout(timeout); $tip.remove() }) } $.support.transition && this.$tip.hasClass("fade") ? removeWithAnimation() : $tip.remove() }, fixTitle: function () { var $e = this.$element; if ($e.attr("title") || typeof ($e.attr("data-original-title")) != "string") { $e.attr("data-original-title", $e.attr("title") || "").removeAttr("title") } }, hasContent: function () { return this.getTitle() }, getPosition: function (inside) { return $.extend({}, (inside ? { top: 0, left: 0} : this.$element.offset()), { width: this.$element[0].offsetWidth, height: this.$element[0].offsetHeight }) }, getTitle: function () { var title, $e = this.$element, o = this.options; title = $e.attr("data-original-title") || (typeof o.title == "function" ? o.title.call($e[0]) : o.title); return title }, tip: function () { return this.$tip = this.$tip || $(this.options.template) }, validate: function () { if (!this.$element[0].parentNode) { this.hide(); this.$element = null; this.options = null } }, enable: function () { this.enabled = true }, disable: function () { this.enabled = false }, toggleEnabled: function () { this.enabled = !this.enabled }, toggle: function () { this[this.tip().hasClass("in") ? "hide" : "show"]() } }; $.fn.tooltip = function (option) { return this.each(function () { var $this = $(this), data = $this.data("tooltip"), options = typeof option == "object" && option; if (!data) { $this.data("tooltip", (data = new Tooltip(this, options))) } if (typeof option == "string") { data[option]() } }) }; $.fn.tooltip.Constructor = Tooltip; $.fn.tooltip.defaults = { animation: true, placement: "top", selector: false, template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>', trigger: "hover", title: "", delay: 0} } (window.jQuery); !function ($) { var Popover = function (element, options) { this.init("popover", element, options) }; Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype, { constructor: Popover, setContent: function () { var $tip = this.tip(), title = this.getTitle(), content = this.getContent(); $tip.find(".popover-title")[this.isHTML(title) ? "html" : "text"](title); $tip.find(".popover-content > *")[this.isHTML(content) ? "html" : "text"](content); $tip.removeClass("fade top bottom left right in") }, hasContent: function () { return this.getTitle() || this.getContent() }, getContent: function () { var content, $e = this.$element, o = this.options; content = $e.attr("data-content") || (typeof o.content == "function" ? o.content.call($e[0]) : o.content); return content }, tip: function () { if (!this.$tip) { this.$tip = $(this.options.template) } return this.$tip } }); $.fn.popover = function (option) { return this.each(function () { var $this = $(this), data = $this.data("popover"), options = typeof option == "object" && option; if (!data) { $this.data("popover", (data = new Popover(this, options))) } if (typeof option == "string") { data[option]() } }) }; $.fn.popover.Constructor = Popover; $.fn.popover.defaults = $.extend({}, $.fn.tooltip.defaults, { placement: "right", content: "", template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>' }) } (window.jQuery); var flags = {}; $(document).ready(function () { if (flags.hasModifiedLinkPic === true) { return } flags.hasModifiedLinkPic = true; var $a_not_has_img = $("body a:not(:has(img))"); $a_not_has_img.filter('a[href*=".pdf"]').before('<img src="/ssw/Images/IconPdf.png" title="pdf file"/> '); $a_not_has_img.filter('a[href$=".pptx"]').before('<img src="/ssw/Images/IconPP.png" title="PowerPoint Presentation"/> '); $a_not_has_img.filter('a[href$=".doc"], a[href$=".docx"]').before('<img src="/ssw/Images/IconDoc.png" title="Word Document"/> '); $a_not_has_img.filter('a[href$=".wmv"]').before('<img src="/ssw/Images/iconwmv.png" title="Windows Media Video"/> '); $a_not_has_img.filter('a[href$=".mp3"], a[href$=".wav"]').before('<img src="/ssw/Images/iconAudio.png" title="Audio File"/> '); $a_not_has_img.filter('a[href$=".xlsx"]').before('<img src="/ssw/Images/iconXcel.png" title="Excel File"/> '); $a_not_has_img.filter('a[target^="_blank"]').filter(function () { if (this.href.indexOf("/ssw/Redirect/") != -1) { return false } if (this.hostname.indexOf("ssw.com.au") == -1) { return false } return true }).after(' <img src="/ssw/images/IconNewWindow.png" title="This opens in a New Window"/>'); var $external = $a_not_has_img.filter('a:not(".ignore" , ".rsmLink")'); $external.filter(function () { if (!this.hostname) { return false } if (this.href.indexOf("/ssw/Redirect/SSWSharePointEmployee.htm") != -1) { return false } if (this.href.indexOf("/ssw/Redirect/UserGroupBlog.aspx") != -1) { return false } if (this.href.indexOf("/ssw/Redirect/") != -1) { return true } if (this.hostname == location.hostname) { return false } if (this.hostname.indexOf("ssw.com.au") == -1) { return true } return false }).after(' <img src="/ssw/images/external.gif" title="You are now leaving SSW"/>') });